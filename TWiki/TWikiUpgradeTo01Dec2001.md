::: {.fullPage}
::: {.twikiMiddleContainer}
::: {.twikiLeftBar}
::: {.twikiLeftBarContents}
**[TWiki](http://TWiki.org/)**

-   **[Welcome](WelcomeGuest){.twikiLink}**
-   **[Register](TWikiRegistration){.twikiLink}**

------------------------------------------------------------------------

-   **TWiki Web**
-   [TWiki Web Home](WebHome){.twikiLink}
-   [Changes](WebChanges){.twikiLink}
-   [Topics](WebTopicList){.twikiLink}
-   [Index](WebIndex){.twikiLink}
-   [Search](WebSearch){.twikiLink}

------------------------------------------------------------------------

-   **TWiki Webs**
    -   [BX12](../BX12/WebHome){.twikiLink}
    -   [Book](../Book/WebHome){.twikiLink}
    -   [CC[^?^](http://www.program-transformation.org/edit/CC/WebHome?topicparent=TWiki.TWikiUpgradeTo01Dec2001)]{.twikiNewLink
        style="background : #FFFFCE;"}
    -   [Compare](../Compare/WebHome){.twikiLink}
    -   [GPCE06](../GPCE06/WebHome){.twikiLink}
    -   [GPCE08](../GPCE08/WebHome){.twikiLink}
    -   [GPCE09](../GPCE09/WebHome){.twikiLink}
    -   [GPCE10](../GPCE10/WebHome){.twikiLink}
    -   [GPCE11](../GPCE11/WebHome){.twikiLink}
    -   [GPCE12](../GPCE12/WebHome){.twikiLink}
    -   [GPCE13](../GPCE13/WebHome){.twikiLink}
    -   [GPCE14](../GPCE14/WebHome){.twikiLink}
    -   [Gmt](../Gmt/WebHome){.twikiLink}
    -   [Gpce](../Gpce/WebHome){.twikiLink}
    -   [Gpce03](http://www.program-transformation.org/Gpce03/WebHome){.twikiLink}
    -   [Gpce04](../Gpce04/WebHome){.twikiLink}
    -   [Gpce05](../Gpce05/WebHome){.twikiLink}
    -   [Gpceorg](../Gpceorg/WebHome){.twikiLink}
    -   [HART14](../HART14/WebHome){.twikiLink}
    -   [IFIPWG211](http://www.program-transformation.org/IFIPWG211/WebHome){.twikiLink}
    -   [IPA06](../IPA06/WebHome){.twikiLink}
    -   [Main](../Main/WebHome){.twikiLink}
    -   [Octave](../Octave/WebHome){.twikiLink}
    -   [PEPM07](../PEPM07/WebHome){.twikiLink}
    -   [PEPM08](../PEPM08/WebHome){.twikiLink}
    -   [PEPM10](../PEPM10/WebHome){.twikiLink}
    -   [PEPM11](../PEPM11/WebHome){.twikiLink}
    -   [PEPM12](../PEPM12/WebHome){.twikiLink}
    -   [PEPM13](../PEPM13/WebHome){.twikiLink}
    -   [PEPM14](../PEPM14/WebHome){.twikiLink}
    -   [PHP](../PHP/WebHome){.twikiLink}
    -   [Sandbox](../Sandbox/WebHome){.twikiLink}
    -   [Sdf](../Sdf/WebHome){.twikiLink}
    -   [SdfBackup](../SdfBackup/WebHome){.twikiLink}
    -   [Spoofax](../Spoofax/WebHome){.twikiLink}
    -   [Stratego](../Stratego/WebHome){.twikiLink}
    -   [Sts](../Sts/WebHome){.twikiLink}
    -   [TWiki](WebHome){.twikiLink}
    -   [Tiger](../Tiger/WebHome){.twikiLink}
    -   [Tools](../Tools/WebHome){.twikiLink}
    -   [Transform](../Transform/WebHome){.twikiLink}
    -   [Variability](../Variability/WebHome){.twikiLink}
    -   [WGLD](../WGLD/WebHome){.twikiLink}
    -   [WebDSL](../WebDSL/WebHome){.twikiLink}
    -   [default](DefaultWebHome){.twikiLink}

::: {.twikiLeftBarPersonal}
::: {style="overflow:auto; height:1px; width:1px;"}
Changes Index Search

------------------------------------------------------------------------

Webs Book Compare GPCE06 Gmt Gpce Gpce04 Gpce05 IFIPWG211 IPA06 Main
Octave PEPM07 PEPM08 PHP Sandbox Sdf Stratego Sts TWiki Tiger Tools
Transform Variability default
[porn](http://www.estrategiavirtual.com/adult/) [free
porn](http://www.estrategiavirtual.com/free/)
:::
:::
:::
:::

::: {.twikiMain}
::: {.toolBar}
::: {.flexMenuBar}
::: {.flexMenu onmouseover="return showMenu(event, 100);" onmouseout="return hideMenu(event, 100);"}
Page

::: {#flexMenuContent100 .flexMenuContent}
-   [Edit
    Page](http://www.program-transformation.org/edit/TWiki/TWikiUpgradeTo01Dec2001?t=1536827304)
-   [Rename
    Page](http://www.program-transformation.org/rename/TWiki/TWikiUpgradeTo01Dec2001)
-   [Attach
    File](http://www.program-transformation.org/attach/TWiki/TWikiUpgradeTo01Dec2001)

<!-- -->

-   [Printable](http://www.program-transformation.org/view/TWiki/TWikiUpgradeTo01Dec2001?skin=print.pattern)
-   [Wiki
    Source](http://www.program-transformation.org/view/TWiki/TWikiUpgradeTo01Dec2001?skin=text&raw=on&contenttype=text/plain)

<!-- -->

-   [Rev
    31](http://www.program-transformation.org/view/TWiki/TWikiUpgradeTo01Dec2001?rev=1.31)
    [(diff 30)](http://www.program-transformation.org/rdiff/TWiki/TWikiUpgradeTo01Dec2001?rev1=1.31&rev2=1.30)
-   [Rev
    30](http://www.program-transformation.org/view/TWiki/TWikiUpgradeTo01Dec2001?rev=1.30)
    [(diff 29)](http://www.program-transformation.org/rdiff/TWiki/TWikiUpgradeTo01Dec2001?rev1=1.30&rev2=1.29)
-   [Rev
    29](http://www.program-transformation.org/view/TWiki/TWikiUpgradeTo01Dec2001?rev=1.29)
    [(diff 28)](http://www.program-transformation.org/rdiff/TWiki/TWikiUpgradeTo01Dec2001?rev1=1.29&rev2=1.28)
-   [Total
    History](http://www.program-transformation.org/rdiff/TWiki/TWikiUpgradeTo01Dec2001)

<!-- -->

-   [More
    \...](http://www.program-transformation.org/oops/TWiki/TWikiUpgradeTo01Dec2001?template=oopsmore&param1=1.31&param2=1.31)
:::
:::

::: {.flexMenu onmouseover="return showMenu(event, 102);" onmouseout="return hideMenu(event, 102);"}
Web

::: {#flexMenuContent102 .flexMenuContent}
-   [Recent Changes](WebChanges){.twikiLink}
-   [Notify Service](WebNotify){.twikiLink}
-   [News](WebNews){.twikiLink}

<!-- -->

-   [Page Index](WebIndex){.twikiLink}
-   [Search](WebSearch){.twikiLink}

<!-- -->

-   [More
    \...](http://www.program-transformation.org/oops/TWiki/TWikiUpgradeTo01Dec2001?template=oopsmore&param1=1.31&param2=1.31)
:::
:::

::: {.flexMenu onmouseover="return showMenu(event, 103);" onmouseout="return hideMenu(event, 103);"}
Wiki

::: {#flexMenuContent103 .flexMenuContent}
-   [About
    TWiki](http://www.program-transformation.org/view/TWiki/WebHome)
-   [Text
    Formatting](http://www.program-transformation.org/view/TWiki/TextFormattingRules)

<!-- -->

-   [Registration](http://www.program-transformation.org/view/TWiki/TWikiRegistration)
-   [Change
    Password](http://www.program-transformation.org/view/TWiki/ChangePassword)
-   [Reset
    Password](http://www.program-transformation.org/view/TWiki/ResetPassword)

<!-- -->

-   [Users](http://www.program-transformation.org/view/Main/TWikiUsers)
-   [Groups](http://www.program-transformation.org/view/Main/TWikiGroups)
:::
:::
:::
:::

::: {.twikiTopic}
TWiki Upgrade To 01 Dec 2001 {#twiki-upgrade-to-01-dec-2001 .twikiTopicTitle}
============================

::: {.twikiWebTitle}
TWiki
:::

::: {.twikiToc}
-   [TWiki Upgrade Guide](TWikiUpgradeTo01Dec2001#TWiki_Upgrade_Guide)
    -   [Upgrade
        Requirements](TWikiUpgradeTo01Dec2001#Upgrade_Requirements)
    -   [Major Changes from TWiki
        01-Sep-2001](TWikiUpgradeTo01Dec2001#Major_Changes_from_TWiki_01_Sep)
    -   [Major Changes from TWiki
        01-Dec-2000](TWikiUpgradeTo01Dec2001#Major_Changes_from_TWiki_01_Dec)
    -   [TWiki Directory Structure and File
        Names](TWikiUpgradeTo01Dec2001#TWiki_Directory_Structure_and_Fi)
    -   [Standard Upgrade Procedure from 01-Sep-2001 to 01-Dec-2001
        Release](TWikiUpgradeTo01Dec2001#Standard_Upgrade_Procedure_from)
    -   [Standard Upgrade Procedure from 01-Dec-2000 to 01-Dec-2001
        Release](TWikiUpgradeTo01Dec2001#Standard_Upgrade_Procedure_from)
        -   [Pre-Upgrade
            Preparation](TWikiUpgradeTo01Dec2001#Pre_Upgrade_Preparation)
        -   [Step 1: Backup &
            Unpack](TWikiUpgradeTo01Dec2001#Step_1_Backup_Unpack)
        -   [Step 2: Upgrade TWiki document
            files](TWikiUpgradeTo01Dec2001#Step_2_Upgrade_TWiki_document_fi)
        -   [Step 3: Install new template
            files](TWikiUpgradeTo01Dec2001#Step_3_Install_new_template_file)
        -   [Step 4: Install new data and pub
            files](TWikiUpgradeTo01Dec2001#Step_4_Install_new_data_and_pub)
        -   [Step 5: Install new CGI
            scripts](TWikiUpgradeTo01Dec2001#Step_5_Install_new_CGI_scripts)
        -   [Step 6: Install new Perl library
            files](TWikiUpgradeTo01Dec2001#Step_6_Install_new_Perl_library)
        -   [Step 7: Set configurations and test
            installation](TWikiUpgradeTo01Dec2001#Step_7_Set_configurations_and_te)
        -   [Step 8: Update
            topics](TWikiUpgradeTo01Dec2001#Step_8_Update_topics)
        -   [Step 9: Customize template
            files](TWikiUpgradeTo01Dec2001#Step_9_Customize_template_files)
        -   [Step 10: Switch over to new
            installation](TWikiUpgradeTo01Dec2001#Step_10_Switch_over_to_new_insta)
        -   [Step 11: Test the TWiki
            Plugins](TWikiUpgradeTo01Dec2001#Step_11_Test_the_TWiki_Plugins)
        -   [General Format
            Changes](TWikiUpgradeTo01Dec2001#General_Format_Changes)
    -   [Known Issues](TWikiUpgradeTo01Dec2001#Known_Issues)
:::

[]{#TWiki_Upgrade_Guide} TWiki Upgrade Guide
============================================

*Upgrade from TWiki 01-Dec-2000 or TWiki 01-Sep-2001 to TWiki
01-Dec-2001 (previous to new full release)*

This guide describes how to upgrade either from TWiki 01-Dec-2000 or
TWiki 01-Sep-2001 to TWiki 01-Dec-2001.

-   The latest version of TWiki (01-Dec-2001) is a small incremental
    release over the 01-Sep-2001 version.
-   The 01-Sep-2001 version involves several major new features and
    numerous enhancements to the last full version (01-Dec-2000). The
    file system set-up is almost identical, but much of the underlying
    data structure and processes is new. With all the changes, the
    upgrade procedure is straightforward, and your existing page data is
    imported directly.

[]{#Upgrade_Requirements} Upgrade Requirements
----------------------------------------------

-   To upgrade from a 01-Dec-2000 or 01-Sep-2001 standard installation
    to the latest 01-Dec-2001 TWiki Production Release, follow the
    instructions below.

<!-- -->

-   ***NOTE:*** To upgrade from a **pre-01-Dec-2000** TWiki, start with
    [TWikiUpgradeTo01Dec2000](TWikiUpgradeTo01Dec2000){.twikiLink}.

<!-- -->

-   To upgrade from a Beta of the new release, or if you made custom
    modifications to the application, read through all new reference
    documentation, then use the procedure below as a guideline.

[]{#Major_Changes_from_TWiki_01_Sep}[]{#Major_Changes_from_TWiki_01_Sep_} Major Changes from TWiki 01-Sep-2001
--------------------------------------------------------------------------------------------------------------

The latest 01-Dec-2001 release includes the following new features and
enhancements compared to the 01-Sep-2001 release:

-   **[FormattedSearch](FormattedSearch){.twikiLink}** - New `format=""`
    parameter in `%SEARCH{}%` variable for database like reporting.
-   Various bug fixes

[]{#Major_Changes_from_TWiki_01_Dec}[]{#Major_Changes_from_TWiki_01_Dec_} Major Changes from TWiki 01-Dec-2000
--------------------------------------------------------------------------------------------------------------

The 01-Sep-2001 release includes the following new features and
enhancements compared to the 01-Dec-2000 release:

-   **[TWikiPlugins](TWikiPlugins){.twikiLink}** - Easily install
    program enhancements using external plug-in modules. Developers can
    create plug-ins in Perl, with the [TWiki Plugin
    API](TWikiPlugins#PluginAPI){.twikiAnchorLink}.
    -   [InterwikiPlugin](InterwikiPlugin){.twikiLink} (preinstalled) -
        Link to external sites with text aliases, `SiteAlias:Page`;
        rules are defined in [InterWikis](InterWikis){.twikiLink}. (Get
        more Plugins from the
        [TWiki:Plugins](http://twiki.org/cgi-bin/view/Plugins "'Plugins' on TWiki.org")
        web.)
-   **[TWikiTemplates](TWikiTemplates){.twikiLink}** - New, more
    flexible template system.
-   **[TWikiSkins](TWikiSkins){.twikiLink}** - Overwrite template
    headers and footers; page content is unaffected.
-   **[TWikiMetaData](TWikiMetaData){.twikiLink}** - New data format
-   **[TWiki.TWikiForms](TWikiForms){.twikiLink}** - Create multiple
    input forms per web; data is rendered in HTML tables.
-   **[ManagingTopics](ManagingTopics){.twikiLink}** - Individual topics
    can be renamed, moved and deleted through the browser. Deleted
    topics are stored in a common Trash web.
-   **[Change
    passwords](TWikiUserAuthentication#ChangingPasswords){.twikiAnchorLink}** -
    Change and reset passwords using forms.
-   **[TOC (Table of Contents)](TWikiVariables){.twikiLink}** - `%TOC%`
    variable generates a hierarchical table of contents from topic
    headings: \<h1\>\...\<h6\>.
-   **[Arbitrary Text for WikiWord
    Links](TWikiVariables){.twikiLink}** - Text formatting rules to
    generate automatic links from any combination of words and spaces.
-   **[Attachments Under Revision
    Control](FileAttachment){.twikiLink}** - Changes made to files
    attached to topics are now saved under revision control (RCS).
-   **[SuperAdministrator
    Group](TWikiAccessControl#SuperAdminGroup){.twikiAnchorLink}** -
    Lets you to make the members of one user group - by default,
    TWikiAdminGroup - into TWiki superusers, with the ability to
    overwrite locked topics from the browser interface. (This gets
    around the problem of topic lockouts, caused by typos in access
    privilege definitions.)
-   **HierarchicalNavigation** uses new [Meta
    Data](TWikiMetaData){.twikiLink} variables to link hierarchically.
-   **Convert to XHTML** - Pages are rendered for display in XHTML 1.0,
    as far as possible without breaking HTML 3.2 compliance.

[]{#TWiki_Directory_Structure_and_Fi} TWiki Directory Structure and File Names
------------------------------------------------------------------------------

The TWiki directory structure remains the same, with one exception, the
TWiki configuration file and Perl modules have been moved from the
`twiki/bin` directory into it\'s own `twiki/lib` directory tree. The
following files have been renamed and moved:

  [From TWiki 01-Dec-2000:](TWikiUpgradeTo01Dec2001@sortcol=0&table=1&up=0#sorted_table "Sort by this column")   [To TWiki 01-Dec-2001:](TWikiUpgradeTo01Dec2001@sortcol=1&table=1&up=0#sorted_table "Sort by this column")
  -------------------------------------------------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------------
  `twiki/bin/wikicfg.pm`                                                                                         `twiki/lib/TWiki.cfg`
  `twiki/bin/wiki.pm`                                                                                            `twiki/lib/TWiki.pm`
  `twiki/bin/wikiaccess.pm`                                                                                      `twiki/lib/TWiki/Access.pm`
  `twiki/bin/wikiprefs.pm`                                                                                       `twiki/lib/TWiki/Prefs.pm`
  `twiki/bin/wikisearch.pm`                                                                                      `twiki/lib/TWiki/Search.pm`
  `twiki/bin/wikistore.pm`                                                                                       `twiki/lib/TWiki/Store.pm`

A new `twiki/lib/TWiki/Plugins` directory contains the new Plugin
modules.

[]{#Standard_Upgrade_Procedure_from}[]{#Standard_Upgrade_Procedure_from_} Standard Upgrade Procedure from 01-Sep-2001 to 01-Dec-2001 Release
--------------------------------------------------------------------------------------------------------------------------------------------

This incremental update can be performed easily.

The following steps describe the upgrade assuming that `$TWIKIROOT` is
the root of your current 01-Sep-2001 release.

1.  Back up and prepare:
    -   Back up all existing TWiki directories `$TWIKIROOT/bin`,
        `$TWIKIROOT/pub`, `$TWIKIROOT/data`, `$TWIKIROOT/templates`.
    -   Create a temporary directory and unpack the ZIP file there.
2.  Update files in TWiki root:
    -   Overwrite all `*.html` and `*.txt` files in `$TWIKIROOT` with
        the new ones.
3.  Update template files:
    -   Overwrite all template files in `$TWIKIROOT/templates` with the
        new ones.
4.  Update script files:
    -   Overwrite all script files in `$TWIKIROOT/bin` with the new
        ones.
5.  Update library files:
    -   Overwrite the `TWiki.pm` library in `$TWIKIROOT/lib` with the
        new one.
    -   Overwrite all `*.pm` library files in `$TWIKIROOT/lib/TWiki` and
        `$TWIKIROOT/lib/TWiki/Plugins` with the new ones.
6.  Update data/TWiki files: (in case you want the updated docs)
    -   Using your browser, merge the new TWiki.TWikiRegistration topic
        (or TWiki.TWikiRegistrationPub in case you used that one) into
        your existing TWiki.TWikiRegistration topic.
    -   In the temporary `twiki/data/TWiki` directory where you unzipped
        the installation package:
        -   Remove the files you do **not** want to upgrade:
            `TWikiPreferences.*`, `WebNotify.*`, `WebPreferences.*`,
            `WebStatistics.*` and all `WebTopic*` files.
        -   In case the cgi-scripts are not running as user `nobody`:
            The `*,v` RCS repository files delivered with the
            installation package are locked by user nobody and need to
            be changed to the user of your cgi-scripts, e.g.,
            `www-data`. A simple way to switch the locker of the RCS
            files is to use sed:\
            `for f in *,v; do sed 's/nobody\:/www-data\:/' $f > x; mv x $f; done`
    -   Move all remaining `*.txt` and `*.txt,v` files from the
        temporary `data/TWiki` directory to your `$TWIKIROOT/data/TWiki`
        directory.
7.  Update pub/TWiki files:
    -   Move the new `pub/TWiki/TWikiDocGraphics` directory into your
        `$TWIKIROOT/pub/TWiki` directory.

[]{#Standard_Upgrade_Procedure_from}[]{#Standard_Upgrade_Procedure_from_} Standard Upgrade Procedure from 01-Dec-2000 to 01-Dec-2001 Release
--------------------------------------------------------------------------------------------------------------------------------------------

The idea is to have the new and old installation work in parallel so
that you can test the new installation before switching over. That way
you can make the switch on your live TWiki installation within one
minute without affecting the users.

**Before Switch:**
:::
:::
:::
:::

**After Switch:**

**Current 01-Dec-2000:**

**New 01-Dec-2001:**

**Obsolete 01-Dec-2000:**

**New 01-Dec-2001:**

`twiki/templates/`

`twiki/templates2/`

`twiki/templates1/`

`twiki/templates/`

`twiki/bin/`

`twiki/bin/2/`

(overwritten)

`twiki/bin/`

(N/A)

`twiki/bin/lib/`

(N/A)

`twiki/lib/`

`twiki/data/TWiki`

`twiki/data/TWiki2`

`twiki/data/TWiki1`

`twiki/data/TWiki`

(other directories do not change)

Alternatively you could move the existing installation away, install the
01-Dec-2001 release into it\'s place and move your webs and pub files
back.

Follow this step-by-step guide to upgrade from the 01-Dec-2000 TWiki to
the 01-Dec-2001 release, importing your original page data and related
files:

### []{#Pre_Upgrade_Preparation} Pre-Upgrade Preparation

Two major areas of TWiki functionality -
[TWikiTemplates](TWikiTemplates){.twikiLink} and
[TWikiForms](TWikiForms){.twikiLink} (input forms associated with a
topic)- are entirely different in the new TWiki. If you\'ve customized
your templates or use Category Tables, read those sections *before*
starting your upgrade.

The following steps describe the upgrade on Unix. Windows setup is very
similar. It\'s assumed that `$TWIKIROOT` is the root of your current
01-Dec-2000 release, ex: `export TWIKIROOT=/some/dir/`

### []{#Step_1_Backup_Unpack} Step 1: Backup & Unpack

1.  Back up all existing TWiki directories `twiki/bin`, `twiki/pub`,
    `twiki/data`, `twiki/templates`.
2.  Create a temporary directory and unpack the ZIP file there:\
    `mkdir -p ~/tmp/`\
    `cp -p ~/downloads/TWiki20011201.zip ~/tmp/`\
    `cd ~/tmp/`\
    `unzip ~/tmp/TWiki20011201.zip`

### []{#Step_2_Upgrade_TWiki_document_fi} Step 2: Upgrade TWiki document files

1.  Move the document files to your TWiki root ( `twiki` ):\
    `mv ~/tmp/TWiki*.html $TWIKIROOT`\
    `mv ~/tmp/index.html $TWIKIROOT`\
    `mv ~/tmp/readme.txt $TWIKIROOT`\
    `mv ~/tmp/license.txt $TWIKIROOT`

### []{#Step_3_Install_new_template_file} Step 3: Install new template files

1.  Move & rename the template directory to a temporary
    `twiki/templates2` directory, ex:\
    `mv ~/tmp/templates $TWIKIROOT/templates2`
2.  Pay attention to the file and directory permissions (security
    issue). Set file permissions, ex:\
    `chmod 644 *.cgi`

### []{#Step_4_Install_new_data_and_pub}[]{#Step_4_Install_new_data_and_pub_} Step 4: Install new data and pub files

1.  Move the TWiki web to a temporary TWiki2 `twiki/data/TWiki2`
    directory. Do the same to files attached to this web, ex:\
    `mv ~/tmp/data/TWiki $TWIKIROOT/data/TWiki2`\
    `mv ~/tmp/pub/TWiki $TWIKIROOT/pub/TWiki2`
2.  Move & rename the Know web to a temporary `twiki/data/Know2`
    directory, ex:\
    `mv ~/tmp/data/Know $TWIKIROOT/data/Know2`\
    `mv ~/tmp/pub/Know $TWIKIROOT/pub/Know2`
3.  Move the \_default and Trash web, ex:\
    `mv ~/tmp/data/_default $TWIKIROOT/data`\
    `mv ~/tmp/data/Trash $TWIKIROOT/data`
4.  Move the MIME types file, ex:\
    `mv ~/tmp/data/mime.types $TWIKIROOT/data`
5.  Move the TWiki logo files, ex:\
    `mv ~/tmp/pub/*.gif $TWIKIROOT/pub`
6.  Pay attention to the file permissions of the `TWiki2` and `Know2`
    directories and its files. The files must be writable by the
    cgi-scripts (usually user `nobody`).
7.  In case the cgi-scripts are not running as user `nobody`: The `*,v`
    RCS repository files delivered with the installation package are
    locked by user nobody and need to be changed to the user of your
    cgi-scripts, e.g., `www-data`. A simple way to switch the locker of
    the RCS files is to use sed:\
    `for f in *,v; do sed 's/nobody\:/www-data\:/' $f > x; mv x $f; done`

### []{#Step_5_Install_new_CGI_scripts} Step 5: Install new CGI scripts

1.  Move & rename the CGI script directory to a temporary `twiki/bin/2`
    directory, ex:\
    `mv ~/tmp/bin $TWIKIROOT/bin/2`
2.  If necessary, change the script names to include the required
    extension, ex: `.cgi`
3.  Copy any additional scripts you might have from the 01-Dec-2000
    release, ex:\
    `cp -p $TWIKIROOT/bin/somescript $TWIKIROOT/bin/2`
4.  In case you use basic authentication, rename `.htaccess.txt` to
    `.htaccess` and customize it, ex:\
    `cd $TWIKIROOT/bin/2`\
    `mv .htaccess.txt .htaccess`\
    `diff ../.htaccess .`\
    and merge the content
5.  Pay attention to the file and directory permissions (security
    issue). Set permissions, ex:\
    `chmod 755 *.cgi`

### []{#Step_6_Install_new_Perl_library}[]{#Step_6_Install_new_Perl_library_} Step 6: Install new Perl library files

1.  Move the lib directory to a temporary `twiki/bin/lib` directory,
    ex:\
    `mv ~/tmp/lib $TWIKIROOT/bin`
2.  Pay attention to the file and directory permissions (security
    issue). Set permissions, ex:\
    `chmod 644 *.pm`

### []{#Step_7_Set_configurations_and_te} Step 7: Set configurations and test installation

1.  Merge the content of the old `twiki/bin/wikicfg.pm` into the new
    `twiki/lib/TWiki.cfg` configuration file. Use the `diff` command to
    find out the differences, ex:\
    `cd $TWIKIROOT/bin/lib`\
    `diff ../wikicfg.pm TWiki.cfg`
2.  Make sure to set the correct temporary location of templates and
    scripts, ex:\
    `$scriptUrlPath    = "/twiki/bin/2";`\
    `$templateDir      = "/home/httpd/twiki/templates2";`
3.  Do **not** merge the functions `extendHandleCommonTags`,
    `extendGetRenderedVersionOutsidePRE`,
    `extendGetRenderedVersionInsidePRE` from the old
    `twiki/bin/wikicfg.pm`. This is now handled by the Default plugin
    `twiki/lib/TWiki/Plugins/Default.pm`
4.  Test your new TWiki installation to see if you can view topics.
    Point your browser to the old installation and fix the URL to see
    the new installation, ex:
    -   Old URL: `http://localhost/cgi-bin/view`
    -   New URL: `http://localhost/cgi-bin/2/view`

### []{#Step_8_Update_topics} Step 8: Update topics

You can do the following changes using your old TWiki 01-Dec-2000 or new
TWiki 01-Dec-2001 installation. Pointing your browser to the old
installation for edit-copy-edit-paste operations is recommended, so that
users don\'t get surprised by meta data content showing up in topics.

1.  Remember that you now have two TWiki webs:
    -   The original `TWiki` web.
    -   The new `TWiki2` web, which gets renamed to `TWiki` when you
        switch over the installation.
2.  In case you customized `TWiki.TWikiRegistration`, merge your changes
    back into `TWiki2.TWikiRegistration`.
3.  Copy to `TWiki2` any topics that you created in the `TWiki` web.
    -   Do the same for
4.  In `TWiki2.TWikiPreferences`, merge the old `TWiki.TWikiPreferences`
    settings and customize it.
    -   Add your webs to WIKIWEBLIST
    -   Set the WIKIWEBMASTER
    -   Set the SMTPMAILHOST
5.  In `WebPreferences` of all webs, add or change the following web
    preferences: (see `TWiki.WebPreferences`)
    -   Add a NOSEARCHALL in case you want to exclude the web from a
        `web="all"` search:\
        `* Set NOSEARCHALL = on`
    -   In WEBTOPICLIST, remove the `%WEB% . {}` decoration from the
        list (it is now in the templates), ex:\
        `* Set WEBTOPICLIST = <a href="WebHome">Home</a>`\
        `  | <a href="WebChanges">Changes</a>`\
        `  | <a href="WebIndex">Index</a>`\
        `  | <a href="WebSearch">Search</a>`\
        `  | Go <input type="text" name="topic" size="16" />`
    -   Add a these new preferences:\
        `* Set DENYWEBVIEW =`\
        `* Set ALLOWWEBVIEW =`\
        `* Set DENYWEBRENAME =`\
        `* Set ALLOWWEBRENAME =`
    -   Set the FINALPREFERENCES:\
        `* Set FINALPREFERENCES = WEBTOPICLIST, DENYWEBVIEW, ALLOWWEBVIEW, DENYWEBCHANGE, ALLOWWEBCHANGE, DENYWEBRENAME, ALLOWWEBRENAME`
6.  Optional: In `WebSearch` of all webs, replace content with this one
    line:\
    `%INCLUDE{"%TWIKIWEB%.WebSearch"}%`
7.  Optional: In `WebChanges` of all webs, replace content with this one
    line:\
    `%INCLUDE{"%TWIKIWEB%.WebChanges"}%`

### []{#Step_9_Customize_template_files} Step 9: Customize template files

***NOTE:*** Skip this step if you did not customize your template files.

1.  Remember that you have now two template directories:
    -   The original `twiki/templates`.
    -   The new `twiki/templates2`, which gets renamed to
        `twiki/templates` when you switch over the installation.
2.  Customized templates and skins need to be upgraded to the new
    [TWikiTemplates](TWikiTemplates){.twikiLink}. This isn\'t difficult,
    but you have be familiar with the new template set-up before
    starting the conversion. The safest way is to use the new templates
    as a base and to merge your changes back. Changes in new templates:
    -   Templates are now rendered by TWiki. You can use all
        [TextFormattingRules](TextFormattingRules){.twikiLink}, but you
        have to escape unwanted ones. Also, remove empty lines unless
        you want a `=<p />` tag added.
    -   Added [TWikiMetaData](TWikiMetaData){.twikiLink} rendering.
3.  Form Templates replace the TWikiCategoryTables:
    -   Create a replacement `WebForm` topic based on
        `twikicatitems.tmpl` in each web that uses a Category Table. See
        details in [TWikiForms](TWikiForms){.twikiLink} and compare with
        the settings in the `Know2.WebPreferences` topic.\
        ![ALERT!](../pub/TWiki/TWikiDocGraphics/warning.gif){width="16"
        height="16"} Do not remove the `twikicatitems.tmpl` file, it is
        still used for topics that are of the old format.
    -   Searches need to be adjusted to deal with format change. It is
        possible to define a regular expression search that can deal at
        the same time with topics in the old format and new format.
        -   ***Example:*** List all topics in the Know web that have a
            [TopicClassification[^?^](http://www.program-transformation.org/edit/Know/TopicClassification?topicparent=TWiki.TWikiUpgradeTo01Dec2001)]{.twikiNewLink
            style="background : #FFFFCE;"} of
            [PublicFAQ[^?^](http://www.program-transformation.org/edit/Know/PublicFAQ?topicparent=TWiki.TWikiUpgradeTo01Dec2001)]{.twikiNewLink
            style="background : #FFFFCE;"}:\
            `%SEARCH{ "[T]opicClassification.*?(td..td|value\=).*?[P]ublicFAQ" casesensitive="on" regex="on" nosearch="on" web="Know"}%`\
            (The `[T]` and `[P]` is done so that search does not find
            the topic where this search string is located in!)
        -   ***Example:*** Create a link that lists all topics in the
            Know web with a
            [TopicClassification[^?^](http://www.program-transformation.org/edit/Know/TopicClassification?topicparent=TWiki.TWikiUpgradeTo01Dec2001)]{.twikiNewLink
            style="background : #FFFFCE;"} of
            [PublicFAQ[^?^](http://www.program-transformation.org/edit/Know/PublicFAQ?topicparent=TWiki.TWikiUpgradeTo01Dec2001)]{.twikiNewLink
            style="background : #FFFFCE;"}:\
            `[[%SCRIPTURL%/search%SCRIPTSUFFIX%/Know/?scope=text&search=%5BT%5DopicClassification.*%3F%28td..td%7Cvalue%5C%3D%29.*%3F%5BP%5DublicFAQ&regex=on][All Public FAQ]]`\
            [All Public
            FAQ[^?^](http://www.program-transformation.org/edit/TWiki/SearchKnowscopetextsearch5BT5DopicClassification3F28tdtd7Cvalue5C3D293F5BP5DublicFAQregexon?topicparent=TWiki.TWikiUpgradeTo01Dec2001)]{.twikiNewLink
            style="background : #FFFFCE;"}
4.  For each web that has a custom `notedited.tmpl` template, create an
    equivalent [WebTopicEditTemplate](WebTopicEditTemplate){.twikiLink}
    to conform with the new
    [TemplateTopics](TWikiTemplates#TemplateTopics){.twikiAnchorLink}.
    The new format replaces the `notedited.tmpl`, `notext.tmpl` and
    `notwiki.tmpl` templates.

### []{#Step_10_Switch_over_to_new_insta} Step 10: Switch over to new installation

In this step, you move the working 01-Dec-2001 installation to the old
01-Dec-2000 installation, so that users don\'t have to change the URL.

1.  Test your new 01-Dec-2001 installation under `twiki/bin/2/view` to
    make sure everything works as expected.
    -   ***NOTE:*** Don\'t worry about the Plugins, they\'ll work after
        the switch.
2.  Edit `$TWIKIROOT/bin/lib/TWiki.cfg` and remove the `/2` from
    `$scriptUrlPath` and `$templateDir`, ex:\
    `$scriptUrlPath    = "/twiki/bin";`\
    `$templateDir      = "/home/httpd/twiki/templates";`
3.  Rename the `TWiki2` web to `TWiki`, including attachments, ex:\
    `cd $TWIKIROOT/data`\
    `mv TWiki TWiki1`\
    `mv TWiki2 TWiki`\
    `cd $TWIKIROOT/pub`\
    `mv TWiki TWiki1`\
    `mv TWiki2 TWiki`
4.  Rename the `templates2` directory to `templates`, ex:\
    `cd $TWIKIROOT`\
    `mv templates templates1`\
    `mv templates2 templates`
5.  Move the `lib` directory one level up from `$TWIKIROOT/bin/lib` to
    `$TWIKIROOT/lib`, ex:\
    `cd $TWIKIROOT`\
    `mv bin/lib .`
6.  Copy content of `bin/2` to `bin`, ex:\
    `cd $TWIKIROOT/bin`\
    `cp -p bin/2/* .`\
    `cp -p bin/2/.htaccess .`
7.  Point your browser to the original URL and make sure the relocated
    01-Dec-2001 installation works as expected: check browsing,
    searching and user registration.
8.  Clean up and remove obsolete directories:
    -   Remove directory `$TWIKIROOT/bin/2`
    -   Remove directory `$TWIKIROOT/templates1`
    -   Remove directory `$TWIKIROOT/data/TWiki1`
    -   Remove directory `$TWIKIROOT/pub/TWiki1`
    -   Remove temporary directory, ex: `~/tmp`

### []{#Step_11_Test_the_TWiki_Plugins} Step 11: Test the TWiki Plugins

1.  Test the new [TWikiPlugins](TWikiPlugins){.twikiLink} by checking
    the Plugins settings in
    [TWikiPreferences](TWikiPreferences){.twikiLink}.
    -   The `EmptyPlugin`, `DefaultPlugin`, and `InterwikiPlugin` should
        be preinstalled. To check the
        [InterwikiPlugin](InterwikiPlugin){.twikiLink}, go to its page.
2.  If you have customized the functions `extendHandleCommonTags`,
    `extendGetRenderedVersionOutsidePRE` and
    `extendGetRenderedVersionInsidePRE` in `twiki/bin/wikicfg.pm`:
    -   Merge those changes back into
        `twiki/lib/TWiki/Plugins/Default.pm`

### []{#General_Format_Changes} General Format Changes

-   The format of the `%GMTIME{"..."}%` and `%SERVERTIME{"..."}%`
    variables is now `"$hour:$min"` instead of `"hour:min"`. More in
    [TWikiVariables](TWikiVariables){.twikiLink}.

<!-- -->

-   [ExtendingTableSyntax](TWikiVariables){.twikiLink}: Enhanced table
    syntax might have unwanted side effect: `| *bold* |` cells,
    `|  center aligned  |` and `|   right aligned |` cells, span
    multiple columns using `| empty cells |||`. More in
    [TextFormattingRules](TextFormattingRules){.twikiLink}.

<!-- -->

-   Use `Net::SMTP` module instead of `sendmail` if installed.

<!-- -->

-   Use `<verbatim> ... </verbatim>` tags instead of `<pre> ... </pre>`
    tags where appropriate. More in
    [TextFormattingRules](TextFormattingRules){.twikiLink}.

<!-- -->

-   New variable `%STARTINCLUDE%` and `%STOPINCLUDE%` variables to
    control what gets included of a topic. More in
    [TWikiVariables](TWikiVariables){.twikiLink}.

<!-- -->

-   [FileAttachment](FileAttachment){.twikiLink} info is now stored as
    [TWiki Meta Data](TWikiMetaData){.twikiLink}.
    -   Upgrading of imported pagess is done automatically after first
        edit, on save. \"In memory\" upgrade is done on topic view.
    -   Attachments are now under revision control: `$attachAsciiPath`
        in `TWiki.cfg` defines which file types are stored in ASCII,
        otherwise, binary format is used. This means that the RCS
        version used should support binary files.

<!-- -->

-   Handling for topic-specific templates like `edit.new.tmpl` has been
    removed and replaced by template topics in the new
    [TWikiTemplates](TWikiTemplates){.twikiLink}.

<!-- -->

-   A new file `warning.txt` file can appear in the `data` directory. It
    may contain diagnostic info identifying problems that need fixing.
    This file could get fairly large if you have a lot of problems your
    site - you can delete it at any time.

[]{#Known_Issues} Known Issues
------------------------------

-   Check
    [TWiki:Codev/KnownIssuesOfTWiki01Dec2001](http://twiki.org/cgi-bin/view/Codev/KnownIssuesOfTWiki01Dec2001 "'Codev/KnownIssuesOfTWiki01Dec2001' on TWiki.org")
    for known issues of TWiki 01 Dec 2001 (production release)
-   Check
    [TWiki:Codev/KnownIssuesOfTWiki01Sep2001](http://twiki.org/cgi-bin/view/Codev/KnownIssuesOfTWiki01Sep2001 "'Codev/KnownIssuesOfTWiki01Sep2001' on TWiki.org")
    for known issues of TWiki 01 Sep 2001 (production release)

\--
[JohnTalintyre[^?^](http://www.program-transformation.org/edit/TWiki/JohnTalintyre?topicparent=TWiki.TWikiUpgradeTo01Dec2001)]{.twikiNewLink
style="background : #FFFFCE;"} - 18 Jul 2001\
\-- [PeterThoeny](PeterThoeny){.twikiLink} - 03 Dec 2001\
\-- [MikeMannix](../Main/MikeMannix){.twikiLink} - 05 May 2002

\
[]{#TopicEnd}

::: {.twikiTopicInfo .twikiRevInfo .twikiGrayText .twikiMoved}
*TWiki.TWikiUpgradeTo01Dec2001 moved from TWiki.TWikiUpgradeGuide on 17
Dec 2002 - 08:46 by [PeterThoeny](../Main/PeterThoeny){.twikiLink}* -
[put it
back](http://www.program-transformation.org/rename/TWiki/TWikiUpgradeTo01Dec2001?newweb=TWiki&newtopic=TWikiUpgradeGuide&confirm=on "Click to move topic back to previous location, with option to change references.")
:::
