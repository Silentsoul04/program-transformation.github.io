::: {.fullPage}
::: {.twikiMiddleContainer}
::: {.twikiLeftBar}
::: {.twikiLeftBarContents}
**[TWiki](http://TWiki.org/)**

-   **[Welcome](WelcomeGuest){.twikiLink}**
-   **[Register](TWikiRegistration){.twikiLink}**

------------------------------------------------------------------------

-   **TWiki Web**
-   [TWiki Web Home](WebHome){.twikiLink}
-   [Changes](WebChanges){.twikiLink}
-   [Topics](WebTopicList){.twikiLink}
-   [Index](WebIndex){.twikiLink}
-   [Search](WebSearch){.twikiLink}

------------------------------------------------------------------------

-   **TWiki Webs**
    -   [BX12](../BX12/WebHome){.twikiLink}
    -   [Book](../Book/WebHome){.twikiLink}
    -   [CC[^?^](http://www.program-transformation.org/edit/CC/WebHome?topicparent=TWiki.FormattedSearch)]{.twikiNewLink
        style="background : #FFFFCE;"}
    -   [Compare](../Compare/WebHome){.twikiLink}
    -   [GPCE06](../GPCE06/WebHome){.twikiLink}
    -   [GPCE08](../GPCE08/WebHome){.twikiLink}
    -   [GPCE09](../GPCE09/WebHome){.twikiLink}
    -   [GPCE10](../GPCE10/WebHome){.twikiLink}
    -   [GPCE11](../GPCE11/WebHome){.twikiLink}
    -   [GPCE12](../GPCE12/WebHome){.twikiLink}
    -   [GPCE13](../GPCE13/WebHome){.twikiLink}
    -   [GPCE14](../GPCE14/WebHome){.twikiLink}
    -   [Gmt](../Gmt/WebHome){.twikiLink}
    -   [Gpce](../Gpce/WebHome){.twikiLink}
    -   [Gpce03](http://www.program-transformation.org/Gpce03/WebHome){.twikiLink}
    -   [Gpce04](../Gpce04/WebHome){.twikiLink}
    -   [Gpce05](../Gpce05/WebHome){.twikiLink}
    -   [Gpceorg](../Gpceorg/WebHome){.twikiLink}
    -   [HART14](../HART14/WebHome){.twikiLink}
    -   [IFIPWG211](http://www.program-transformation.org/IFIPWG211/WebHome){.twikiLink}
    -   [IPA06](../IPA06/WebHome){.twikiLink}
    -   [Main](../Main/WebHome){.twikiLink}
    -   [Octave](../Octave/WebHome){.twikiLink}
    -   [PEPM07](../PEPM07/WebHome){.twikiLink}
    -   [PEPM08](../PEPM08/WebHome){.twikiLink}
    -   [PEPM10](../PEPM10/WebHome){.twikiLink}
    -   [PEPM11](../PEPM11/WebHome){.twikiLink}
    -   [PEPM12](../PEPM12/WebHome){.twikiLink}
    -   [PEPM13](../PEPM13/WebHome){.twikiLink}
    -   [PEPM14](../PEPM14/WebHome){.twikiLink}
    -   [PHP](../PHP/WebHome){.twikiLink}
    -   [Sandbox](../Sandbox/WebHome){.twikiLink}
    -   [Sdf](../Sdf/WebHome){.twikiLink}
    -   [SdfBackup](../SdfBackup/WebHome){.twikiLink}
    -   [Spoofax](../Spoofax/WebHome){.twikiLink}
    -   [Stratego](../Stratego/WebHome){.twikiLink}
    -   [Sts](../Sts/WebHome){.twikiLink}
    -   [TWiki](WebHome){.twikiLink}
    -   [Tiger](../Tiger/WebHome){.twikiLink}
    -   [Tools](../Tools/WebHome){.twikiLink}
    -   [Transform](../Transform/WebHome){.twikiLink}
    -   [Variability](../Variability/WebHome){.twikiLink}
    -   [WGLD](../WGLD/WebHome){.twikiLink}
    -   [WebDSL](../WebDSL/WebHome){.twikiLink}
    -   [default](DefaultWebHome){.twikiLink}

::: {.twikiLeftBarPersonal}
::: {style="overflow:auto; height:1px; width:1px;"}
Changes Index Search

------------------------------------------------------------------------

Webs Book Compare GPCE06 Gmt Gpce Gpce04 Gpce05 IFIPWG211 IPA06 Main
Octave PEPM07 PEPM08 PHP Sandbox Sdf Stratego Sts TWiki Tiger Tools
Transform Variability default
[porn](http://www.estrategiavirtual.com/adult/) [free
porn](http://www.estrategiavirtual.com/free/)
:::
:::
:::
:::

::: {.twikiMain}
::: {.toolBar}
::: {.flexMenuBar}
::: {.flexMenu onmouseover="return showMenu(event, 100);" onmouseout="return hideMenu(event, 100);"}
Page

::: {#flexMenuContent100 .flexMenuContent}
-   [Edit
    Page](http://www.program-transformation.org/edit/TWiki/FormattedSearch?t=1536826245)
-   [Rename
    Page](http://www.program-transformation.org/rename/TWiki/FormattedSearch)
-   [Attach
    File](http://www.program-transformation.org/attach/TWiki/FormattedSearch)

<!-- -->

-   [Printable](http://www.program-transformation.org/view/TWiki/FormattedSearch?skin=print.pattern)
-   [Wiki
    Source](http://www.program-transformation.org/view/TWiki/FormattedSearch?skin=text&raw=on&contenttype=text/plain)

<!-- -->

-   [Rev
    15](http://www.program-transformation.org/view/TWiki/FormattedSearch?rev=1.15)
    [(diff 14)](http://www.program-transformation.org/rdiff/TWiki/FormattedSearch?rev1=1.15&rev2=1.14)
-   [Rev
    14](http://www.program-transformation.org/view/TWiki/FormattedSearch?rev=1.14)
    [(diff 13)](http://www.program-transformation.org/rdiff/TWiki/FormattedSearch?rev1=1.14&rev2=1.13)
-   [Rev
    13](http://www.program-transformation.org/view/TWiki/FormattedSearch?rev=1.13)
    [(diff 12)](http://www.program-transformation.org/rdiff/TWiki/FormattedSearch?rev1=1.13&rev2=1.12)
-   [Total
    History](http://www.program-transformation.org/rdiff/TWiki/FormattedSearch)

<!-- -->

-   [More
    \...](http://www.program-transformation.org/oops/TWiki/FormattedSearch?template=oopsmore&param1=1.15&param2=1.15)
:::
:::

::: {.flexMenu onmouseover="return showMenu(event, 102);" onmouseout="return hideMenu(event, 102);"}
Web

::: {#flexMenuContent102 .flexMenuContent}
-   [Recent Changes](WebChanges){.twikiLink}
-   [Notify Service](WebNotify){.twikiLink}
-   [News](WebNews){.twikiLink}

<!-- -->

-   [Page Index](WebIndex){.twikiLink}
-   [Search](WebSearch){.twikiLink}

<!-- -->

-   [More
    \...](http://www.program-transformation.org/oops/TWiki/FormattedSearch?template=oopsmore&param1=1.15&param2=1.15)
:::
:::

::: {.flexMenu onmouseover="return showMenu(event, 103);" onmouseout="return hideMenu(event, 103);"}
Wiki

::: {#flexMenuContent103 .flexMenuContent}
-   [About
    TWiki](http://www.program-transformation.org/view/TWiki/WebHome)
-   [Text
    Formatting](http://www.program-transformation.org/view/TWiki/TextFormattingRules)

<!-- -->

-   [Registration](http://www.program-transformation.org/view/TWiki/TWikiRegistration)
-   [Change
    Password](http://www.program-transformation.org/view/TWiki/ChangePassword)
-   [Reset
    Password](http://www.program-transformation.org/view/TWiki/ResetPassword)

<!-- -->

-   [Users](http://www.program-transformation.org/view/Main/TWikiUsers)
-   [Groups](http://www.program-transformation.org/view/Main/TWikiGroups)
:::
:::
:::
:::

::: {.twikiTopic}
Formatted Search {#formatted-search .twikiTopicTitle}
================

::: {.twikiWebTitle}
TWiki
:::

::: {.twikiToc}
-   [TWiki Formatted Search
    Results](FormattedSearch#TWiki_Formatted_Search_Results)
    -   [Syntax](FormattedSearch#Syntax)
    -   [Examples](FormattedSearch#Examples)
        -   [Bullet list showing topic name and
            summary](FormattedSearch#Bullet_list_showing_topic_name_a)
        -   [Table showing form field values of topics with a
            form](FormattedSearch#Table_showing_form_field_values)
        -   [Extract some text from a topic using regular
            expression](FormattedSearch#Extract_some_text_from_a_topic_u)
        -   [Nested Search](FormattedSearch#Nested_Search)
        -   [Most recently changed
            pages](FormattedSearch#Most_recently_changed_pages)
        -   [Search with conditional
            output](FormattedSearch#Search_with_conditional_output)
        -   [Embedding search forms to return a formatted
            result](FormattedSearch#Embedding_search_forms_to_return)
:::

[]{#TWiki_Formatted_Search_Results} TWiki Formatted Search Results
==================================================================

*Inline search feature allows flexible formatting of search result*

The `%SEARCH{...}%` variable documented in
[TWikiVariables](TWikiVariables){.twikiLink} has a fixed format for the
search result, that is, a table consisting of topic names and topic
summaries. Use the `format="..."` parameter to specify a customized
format of the search result. The string of the format parameter is
typically a bullet list or table row containing variables (such as
`%SEARCH{ "food" format="| $topic | $summary |" }%`).

[]{#Syntax} Syntax
------------------

Two parameters can be used to specify a customized search result:

1\. `header="..."` parameter

Use the header parameter to specify the header of a search result. It
should correspond to the format of the format parameter. This parameter
is optional.\
Example: `header="| *Topic:* | *Summary:* |"`

2\. `format="..."` parameter

Use the format parameter to specify the format of one search hit.\
Example: `format="| $topic | $summary |"`

Variables that can be used in the format string:

  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [Name:](FormattedSearch@sortcol=0&table=1&up=0#sorted_table "Sort by this column")   [Expands To:](FormattedSearch@sortcol=1&table=1&up=0#sorted_table "Sort by this column")
  ------------------------------------------------------------------------------------ --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  `$web`                                                                               Name of the web

  `$topic`                                                                             Topic name

  `$topic(20)`                                                                         Topic name, \"`- `\" hyphenated each 20 characters

  `$topic(30, -<br />)`                                                                Topic name, hyphenated each 30 characters with separator \"`-<br />`\"

  `$topic(40, ...)`                                                                    Topic name, shortended to 40 characters with \"`...`\" indication

  `$parent`                                                                            Name of parent topic; empty if not set

  `$parent(20)`                                                                        Name of parent topic, same hyphenation/shortening like `$topic()`

  `$text`                                                                              Formatted topic text. In case of a `multiple="on"` search, it is the line found for each search hit.

  `$locked`                                                                            LOCKED flag (if any)

  `$date`                                                                              Time stamp of last topic update, e.g. `13 Sep 2018 - 08:10`

  `$isodate`                                                                           Time stamp of last topic update, e.g. `2018-09-13T08:10Z`

  `$rev`                                                                               Number of last topic revision, e.g. `1.4`

  `$username`                                                                          Login name of last topic update, e.g. `jsmith`

  `$wikiname`                                                                          Wiki user name of last topic update, e.g. `JohnSmith`

  `$wikiusername`                                                                      Wiki user name of last topic update, like `Main.JohnSmith`

  `$createdate`                                                                        Time stamp of topic revision 1.1

  `$createusername`                                                                    Login name of topic revision 1.1, e.g. `jsmith`

  `$createwikiname`                                                                    Wiki user name of topic revision 1.1, e.g. `JohnSmith`

  `$createwikiusername`                                                                Wiki user name of topic revision 1.1, e.g. `Main.JohnSmith`

  `$summary`                                                                           Topic summary

  `$formname`                                                                          The name of the form attached to the topic; empty if none

  `$formfield(name)`                                                                   The field value of a form field; for example, `$formfield(TopicClassification)` would get expanded to `PublicFAQ`. This applies only to topics that have a [TWikiForm](TWikiForms){.twikiLink}

  `$formfield(name, 10)`                                                               Form field value, \"`- `\" hyphenated each 10 characters

  `$formfield(name, 20, -<br />)`                                                      Form field value, hyphenated each 20 characters with separator \"`-<br />`\"

  `$formfield(name, 30, ...)`                                                          Form field value, shortended to 30 characters with \"`...`\" indication

  `$pattern(reg-exp)`                                                                  A regular expression pattern to extract some text from a topic (does not search meta data; use `$formfield` instead). In case of a `multiple="on"` search, the pattern is applied to the line found in each search hit.\
                                                                                       • Specify a [RegularExpression](RegularExpression){.twikiLink} that covers the whole text (topic or line), which typically starts with `.*`, and must end in `.*`\
                                                                                       • Put text you want to keep in parenthesis, like `$pattern(.*?(from here.*?to here).*)`\
                                                                                       • Example: `$pattern(.*?\*.*?Email\:\s*([^\n\r]+).*)` extracts the email address from a bullet of format `* Email: ...`\
                                                                                       • This example has non-greedy `.*?` patterns to scan for the first occurance of the Email bullet; use greedy `.*` patterns to scan for the last occurance\
                                                                                       • Limitation: Do not use `.*)` inside the pattern, e.g. `$pattern(.*foo(.*)bar.*)` does not work, but `$pattern(.*foo(.*?)bar.*)` does\
                                                                                       • Note: Make sure that the integrity of a web page is not compromised; for example, if you include an HTML table make sure to include everything including the table end tag

  `$n` or `$n()`                                                                       New line

  `$nop` or `$nop()`                                                                   Is a \"no operation\". This variable gets removed; useful for nested search

  `$quot`                                                                              Double quote (`"`). Alternatively write `\"` to escape it

  `$percnt`                                                                            Percent sign (`%`)

  `$dollar`                                                                            Dollar sign (`$`)
  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

[]{#Examples} Examples
----------------------

[]{#SearchBulletList}

### []{#Bullet_list_showing_topic_name_a} Bullet list showing topic name and summary

**Write this:**

`%SEARCH{ "FAQ" scope="topic" nosearch="on" nototal="on" header="   * *Topic: Summary:*" format="   * [[$topic]]: $summary" }%`

**To get this:**

-   **Topic: Summary:**
-   [TWikiFAQ](TWikiFAQ){.twikiLink}: Frequently Asked Questions About
    TWiki This is a real FAQ, and also a demo of one easily implemented
    knowledge base solution. See how it\'s done, click Edit . SEARCH
    \...
-   [TWikiFaqTemplate](TWikiFaqTemplate){.twikiLink}: FAQ: Answer: Back
    to: NOP TWikiFAQ WIKIUSERNAME DATE
-   [TextFormattingFAQ](TextFormattingFAQ){.twikiLink}: Text Formatting
    FAQ The most frequently asked questions about text formatting are
    answered. Also, TextFormattingRules contains the complete TWiki
    shorthand system \...

### []{#Table_showing_form_field_values}[]{#Table_showing_form_field_values_} Table showing form field values of topics with a form

In a web where there is a form that contains a `TopicClassification`
field, an `OperatingSystem` field and an `OsVersion` field we could
write:

`| *Topic:* | *OperatingSystem:* | *OsVersion:* |`\
`%SEARCH{ "[T]opicClassification.*?value=\"[P]ublicFAQ\"" scope="text" regex="on" nosearch="on" nototal="on" format="| [[$topic]] | $formfield(OperatingSystem) | $formfield(OsVersion) |" }%`

To get this:

  **Topic:**                                                                                                            **OperatingSystem:**                                                **OsVersion:**
  --------------------------------------------------------------------------------------------------------------------- ------------------------------------------------------------------- ----------------
  [IncorrectDllVersionW32PTH10DLL](http://www.program-transformation.org/view/Sandbox/IncorrectDllVersionW32PTH10DLL)   [OsWin](http://www.program-transformation.org/view/Sandbox/OsWin)   95/98
  [WinDoze95Crash](http://www.program-transformation.org/view/Sandbox/WinDoze95Crash)                                   [OsWin](http://www.program-transformation.org/view/Sandbox/OsWin)   95

### []{#Extract_some_text_from_a_topic_u} Extract some text from a topic using regular expression

**Write this:**

`%SEARCH{ "__Back to\:__ TWikiFAQ" scope="text" regex="on" nosearch="on" nototal="on" header="TWiki FAQs:" format="   * $pattern(.*?FAQ\:[\n\r]*([^\n\r]+).*) [[$topic][Answer...]]" }%`

**To get this:**

TWiki FAQs:

-   How do I delete or rename a topic?
    [Answer\...](DeleteOrRenameATopic){.twikiLink}
-   How do I delete or rename a file attachment?
    [Answer\...](DeleteOrRenameAnAttachment){.twikiLink}
-   Why does the topic revision not increase when I edit a topic?
    [Answer\...](EditDoesNotIncreaseTheRevision){.twikiLink}
-   TWiki has a GPL (GNU General Public License). What is GPL?
    [Answer\...](GnuGeneralPublicLicense){.twikiLink}
-   How do you log off? Suppose I log in with the guest username but
    later I want to use another username, how do I log off from the
    guest user name? [Answer\...](HowToLogOff){.twikiLink}
-   I\'ve problems with the WebSearch. There is no Search Result on any
    inquiry. By clicking the Index topic it\'s the same problem.
    [Answer\...](SearchDoesNotWork){.twikiLink}
-   What happens if two of us try to edit the same topic simultaneously?
    [Answer\...](SimultaneousEdits){.twikiLink}
-   I would like to install TWiki on my server. Can I get the source?
    [Answer\...](TWikiDownload){.twikiLink}
-   So what is this WikiWiki thing exactly?
    [Answer\...](WhatIsWikiWiki){.twikiLink}
-   Everybody can edit any page, this is scary. Doesn\'t that lead to
    chaos? [Answer\...](WikiCulture){.twikiLink}

### []{#Nested_Search} Nested Search

Search can be nested. For example, search for some topics, then form a
new search for each topic found in the first search. The idea is to
build the nested search string using a formatted search in the first
search.

Here is an example. Let\'s search for all topics that contain the word
\"culture\" (first search), and let\'s find out where each topic found
is linked from (second search).

-   First search:
    -   `%SEARCH{ "culture" format="   * $topic is referenced by: (list all references)" nosearch="on" nototal="on" }%`
-   Second search. For each hit we want this search:
    -   `%SEARCH{ "(topic found in first search)" format="$topic" nosearch="on" nototal="on" separator=", " }%`
-   Now let\'s nest the two. We need to escape the second search, e.g.
    the first search will build a valid second search string. Note that
    we escape the second search so that it does not get evaluated
    prematurely by the first search:
    -   Use `$percnt` to escape the leading percent of the second search
    -   Use `\"` to escape the double quotes
    -   Use `$dollar` to escape the `$` of `$topic`
    -   Use `$nop` to escape the `}%` sequence

**Write this:**

`%SEARCH{ "culture" format="   * $topic is referenced by:$n      * $percntSEARCH{ \"$topic\" format=\"$dollartopic\" nosearch=\"on\" nototal=\"on\" separator=\", \" }$nop%" nosearch="on" nototal="on" }%`

**To get this:**

-   [ATasteOfTWiki](ATasteOfTWiki){.twikiLink} is referenced by:
    -   [ATasteOfTWiki](ATasteOfTWiki){.twikiLink},
        [ATasteOfTWikiTemplate](ATasteOfTWikiTemplate){.twikiLink},
        [TWikiAdminCookBook](TWikiAdminCookBook){.twikiLink},
        [WebHome](WebHome){.twikiLink},
        [WebStatistics](WebStatistics){.twikiLink},
        [WelcomeGuest](WelcomeGuest){.twikiLink}
-   [FormattedSearch](FormattedSearch){.twikiLink} is referenced by:
    -   [EditTablePlugin](EditTablePlugin){.twikiLink},
        [EmptyPlugin](EmptyPlugin){.twikiLink},
        [ManagingWebs](ManagingWebs){.twikiLink},
        [RenderListPlugin](RenderListPlugin){.twikiLink},
        [SearchHelp](SearchHelp){.twikiLink},
        [SpreadSheetPlugin](SpreadSheetPlugin){.twikiLink},
        [TWikiDocumentation](TWikiDocumentation){.twikiLink},
        [TWikiForms](TWikiForms){.twikiLink},
        [TWikiFuncModule](TWikiFuncModule){.twikiLink},
        [TWikiHistory](TWikiHistory){.twikiLink},
        [TWikiMetaData](TWikiMetaData){.twikiLink},
        [TWikiUpgradeTo01Dec2001](TWikiUpgradeTo01Dec2001){.twikiLink},
        [TWikiUpgradeTo01Feb2003](TWikiUpgradeTo01Feb2003){.twikiLink},
        [TWikiVariablesNtoZ](TWikiVariablesNtoZ){.twikiLink},
        [TextFormattingRules](TextFormattingRules){.twikiLink},
        [WebHome](WebHome){.twikiLink},
        [WelcomeGuest](WelcomeGuest){.twikiLink}
-   [TWikiAccessControl](TWikiAccessControl){.twikiLink} is referenced
    by:
    -   [CommentPlugin](CommentPlugin){.twikiLink},
        [EditTablePlugin](EditTablePlugin){.twikiLink},
        [FileAttachment](FileAttachment){.twikiLink},
        [MainFeatures](MainFeatures){.twikiLink},
        [ManagingTopics](ManagingTopics){.twikiLink},
        [ManagingUsers](ManagingUsers){.twikiLink},
        [TWikiAccessControl](TWikiAccessControl){.twikiLink},
        [TWikiDocumentation](TWikiDocumentation){.twikiLink},
        [TWikiForms](TWikiForms){.twikiLink},
        [TWikiFuncModule](TWikiFuncModule){.twikiLink},
        [TWikiHistory](TWikiHistory){.twikiLink},
        [TWikiPreferences](TWikiPreferences){.twikiLink},
        [TWikiTopics](TWikiTopics){.twikiLink},
        [TWikiTutorial](TWikiTutorial){.twikiLink},
        [TWikiUpgradeTo01Dec2000](TWikiUpgradeTo01Dec2000){.twikiLink},
        [TWikiUpgradeTo01Dec2001](TWikiUpgradeTo01Dec2001){.twikiLink},
        [TWikiUserAuthentication](TWikiUserAuthentication){.twikiLink},
        [TWikiVariables](TWikiVariables){.twikiLink},
        [WebHome](WebHome){.twikiLink},
        [WebPreferences](WebPreferences){.twikiLink},
        [WebStatistics](WebStatistics){.twikiLink},
        [WelcomeGuest](WelcomeGuest){.twikiLink},
        [WikiCulture](WikiCulture){.twikiLink},
        [WikiWord](WikiWord){.twikiLink}
-   [TWikiSite](TWikiSite){.twikiLink} is referenced by:
    -   [AdminTools](http://www.program-transformation.org/TWiki/AdminTools){.twikiLink},
        [InstantEnhancements](InstantEnhancements){.twikiLink},
        [InterwikiPlugin](InterwikiPlugin){.twikiLink},
        [ManagingWebs](ManagingWebs){.twikiLink},
        [StartingPoints](StartingPoints){.twikiLink},
        [TWikiDocumentation](TWikiDocumentation){.twikiLink},
        [TWikiGlossary](TWikiGlossary){.twikiLink},
        [TWikiInstallationGuide](TWikiInstallationGuide){.twikiLink},
        [TWikiPreferences](TWikiPreferences){.twikiLink},
        [TWikiRegistration](TWikiRegistration){.twikiLink},
        [TWikiSite](TWikiSite){.twikiLink},
        [TWikiSiteTools](TWikiSiteTools){.twikiLink},
        [TWikiTopics](TWikiTopics){.twikiLink},
        [TWikiTutorial](TWikiTutorial){.twikiLink},
        [TWikiUpgradeTo01Dec2000](TWikiUpgradeTo01Dec2000){.twikiLink},
        [WabiSabi](WabiSabi){.twikiLink},
        [WebChangesAlert](WebChangesAlert){.twikiLink},
        [WebHome](WebHome){.twikiLink},
        [WebSiteTools](WebSiteTools){.twikiLink},
        [WebStatistics](WebStatistics){.twikiLink},
        [WelcomeGuest](WelcomeGuest){.twikiLink},
        [WhatIsWikiWiki](WhatIsWikiWiki){.twikiLink},
        [WikiCulture](WikiCulture){.twikiLink},
        [WikiReferences](WikiReferences){.twikiLink}
-   [WabiSabi](WabiSabi){.twikiLink} is referenced by:
    -   [AppendixFileSystem](AppendixFileSystem){.twikiLink},
        [TWikiSite](TWikiSite){.twikiLink},
        [WabiSabi](WabiSabi){.twikiLink},
        [WikiCulture](WikiCulture){.twikiLink}
-   [WelcomeGuest](WelcomeGuest){.twikiLink} is referenced by:
    -   [ATasteOfTWiki](ATasteOfTWiki){.twikiLink},
        [NewUserTemplate](NewUserTemplate){.twikiLink},
        [StartingPoints](StartingPoints){.twikiLink},
        [TWikiSite](TWikiSite){.twikiLink},
        [TWikiUpgradeTo01Dec2000](TWikiUpgradeTo01Dec2000){.twikiLink},
        [WebHome](WebHome){.twikiLink},
        [WebLeftBar](WebLeftBar){.twikiLink},
        [WebPreferences](WebPreferences){.twikiLink},
        [WhatIsWikiWiki](WhatIsWikiWiki){.twikiLink},
        [WikiCulture](WikiCulture){.twikiLink},
        [YouAreHere](YouAreHere){.twikiLink}
-   [WikiCulture](WikiCulture){.twikiLink} is referenced by:
    -   [TWikiAccessControl](TWikiAccessControl){.twikiLink},
        [TWikiSite](TWikiSite){.twikiLink},
        [WabiSabi](WabiSabi){.twikiLink},
        [WelcomeGuest](WelcomeGuest){.twikiLink}

***Note:*** Nested search can be slow, especially if you nest more then
3 times. Nesting is limited to 16 levels. For each new nesting level you
need to \"escape the escapes\", e.g. write `$dollarpercntSEARCH{` for
level three, `$dollardollarpercntSEARCH{` for level four, etc.

### []{#Most_recently_changed_pages} Most recently changed pages

**Write this:**

`%SEARCH{ "\.*" scope="topic" regex="on" nosearch="on" nototal="on" order="modified" reverse="on"  format="| [[$topic]] | $wikiusername  | $date |" limit="7" }%`

**To get this:**

  ---------------------------------------------------------------------------------- ---------------------------------------------------------- ---------------------
  [WebStatistics](WebStatistics){.twikiLink}                                         [TWikiGuest](../Main/TWikiGuest){.twikiLink}               18 Oct 2016 - 16:57
  [CustomWebMenus](CustomWebMenus){.twikiLink}                                       [EelcoVisser](../Main/EelcoVisser){.twikiLink}             25 Apr 2005 - 19:37
  [CustomSiteMenus](CustomSiteMenus){.twikiLink}                                     [MartinBravenboer](../Main/MartinBravenboer){.twikiLink}   04 Dec 2004 - 17:12
  [AppendixFileSystem](AppendixFileSystem){.twikiLink}                               [PeterThoeny](../Main/PeterThoeny){.twikiLink}             30 Aug 2004 - 07:14
  [AccessKeys](AccessKeys){.twikiLink}                                               [PeterThoeny](../Main/PeterThoeny){.twikiLink}             28 Aug 2004 - 05:53
  [ATasteOfTWiki](ATasteOfTWiki){.twikiLink}                                         [PeterThoeny](../Main/PeterThoeny){.twikiLink}             22 Aug 2004 - 21:49
  [AdminTools](http://www.program-transformation.org/TWiki/AdminTools){.twikiLink}   [PeterThoeny](../Main/PeterThoeny){.twikiLink}             15 Aug 2004 - 06:58
  ---------------------------------------------------------------------------------- ---------------------------------------------------------- ---------------------

### []{#Search_with_conditional_output} Search with conditional output

A regular expression search is flexible, but there are limitations. For
example, you cannot show all topics that are up to exactly one week old,
or create a report that shows all records with invalid form fields or
fields within a certain range, etc. You need some additional logic to
format output based on a condition:

1.  Specify a search which returns more hits then you need
2.  For each search hit apply a spreadsheet formula to determine if the
    hit is needed
3.  If needed, format and output the result
4.  Else supress the search hit

This requires the
[TWiki:Plugins.SpreadSheetPlugin](http://twiki.org/cgi-bin/view/Plugins.SpreadSheetPlugin "'Plugins.SpreadSheetPlugin' on TWiki.org").
The following example shows all topics that are up to exactly one week
old.

**Write this:**

`%CALC{$SET(weekold, $TIMEADD($TIME(), -7, day))}%`\
`%SEARCH{ "." scope="topic" regex="on" nosearch="on" nototal="on" order="modified" reverse="on" format="$percntCALC{$IF($TIME($date) < $GET(weekold), <nop>, | [[$topic]] | $wikiusername | $date | $rev |)}$percnt" limit="100" }%`

-   The first line sets the `weekold` variable to the serialized date of
    exactly one week ago
-   The SEARCH has a deferred CALC. The `$percnt` makes sure that the
    CALC gets executed once for each search hit
-   The CALC compares the date of the topic with the `weekold` date
-   If topic is older, a `<nop>` is returned, which gets removed at the
    end of the TWiki rendering process
-   Otherwise, the search hit is formatted and returned

**To get this:**

### []{#Embedding_search_forms_to_return} Embedding search forms to return a formatted result

Use an HTML form and an embedded formatted search on the same topic. You
can link them together with an `%URLPARAM{"..."}%` variable. Example:

**Write this:**

    <form action="%SCRIPTURLPATH%/view%SCRIPTSUFFIX%/%WEB%/%TOPIC%">
    Find Topics: 
    <input type="text" name="q" size="32" value="%URLPARAM{"q"}%" />
    <input type="submit" value="Search" />
    </form>
    Result:
    %SEARCH{ search="%URLPARAM{"q"}%" format="   * $web.$topic: %BR% $summary" nosearch="on" }%

**To get this:**

Find Topics:

Result: Number of topics: **0**

\--
[TWiki:Main.PeterThoeny](http://twiki.org/cgi-bin/view/Main.PeterThoeny "'Main.PeterThoeny' on TWiki.org")
- 26 Jul 2004\
[]{#TopicEnd}
:::

::: {.twikiTopicInfo .twikiRevInfo .twikiGrayText .twikiMoved}
:::
:::
:::
:::
