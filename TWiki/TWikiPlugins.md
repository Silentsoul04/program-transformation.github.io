::: {.fullPage}
::: {.twikiMiddleContainer}
::: {.twikiLeftBar}
::: {.twikiLeftBarContents}
**[TWiki](http://TWiki.org/)**

-   **[Welcome](WelcomeGuest){.twikiLink}**
-   **[Register](TWikiRegistration){.twikiLink}**

------------------------------------------------------------------------

-   **TWiki Web**
-   [TWiki Web Home](WebHome){.twikiLink}
-   [Changes](WebChanges){.twikiLink}
-   [Topics](WebTopicList){.twikiLink}
-   [Index](WebIndex){.twikiLink}
-   [Search](WebSearch){.twikiLink}

------------------------------------------------------------------------

-   **TWiki Webs**
    -   [BX12](../BX12/WebHome){.twikiLink}
    -   [Book](../Book/WebHome){.twikiLink}
    -   [CC[^?^](http://www.program-transformation.org/edit/CC/WebHome?topicparent=TWiki.TWikiPlugins)]{.twikiNewLink
        style="background : #FFFFCE;"}
    -   [Compare](../Compare/WebHome){.twikiLink}
    -   [GPCE06](../GPCE06/WebHome){.twikiLink}
    -   [GPCE08](../GPCE08/WebHome){.twikiLink}
    -   [GPCE09](../GPCE09/WebHome){.twikiLink}
    -   [GPCE10](../GPCE10/WebHome){.twikiLink}
    -   [GPCE11](../GPCE11/WebHome){.twikiLink}
    -   [GPCE12](../GPCE12/WebHome){.twikiLink}
    -   [GPCE13](../GPCE13/WebHome){.twikiLink}
    -   [GPCE14](../GPCE14/WebHome){.twikiLink}
    -   [Gmt](../Gmt/WebHome){.twikiLink}
    -   [Gpce](../Gpce/WebHome){.twikiLink}
    -   [Gpce03](http://www.program-transformation.org/Gpce03/WebHome){.twikiLink}
    -   [Gpce04](../Gpce04/WebHome){.twikiLink}
    -   [Gpce05](../Gpce05/WebHome){.twikiLink}
    -   [Gpceorg](../Gpceorg/WebHome){.twikiLink}
    -   [HART14](../HART14/WebHome){.twikiLink}
    -   [IFIPWG211](http://www.program-transformation.org/IFIPWG211/WebHome){.twikiLink}
    -   [IPA06](../IPA06/WebHome){.twikiLink}
    -   [Main](../Main/WebHome){.twikiLink}
    -   [Octave](../Octave/WebHome){.twikiLink}
    -   [PEPM07](../PEPM07/WebHome){.twikiLink}
    -   [PEPM08](../PEPM08/WebHome){.twikiLink}
    -   [PEPM10](../PEPM10/WebHome){.twikiLink}
    -   [PEPM11](../PEPM11/WebHome){.twikiLink}
    -   [PEPM12](../PEPM12/WebHome){.twikiLink}
    -   [PEPM13](../PEPM13/WebHome){.twikiLink}
    -   [PEPM14](../PEPM14/WebHome){.twikiLink}
    -   [PHP](../PHP/WebHome){.twikiLink}
    -   [Sandbox](../Sandbox/WebHome){.twikiLink}
    -   [Sdf](../Sdf/WebHome){.twikiLink}
    -   [SdfBackup](../SdfBackup/WebHome){.twikiLink}
    -   [Spoofax](../Spoofax/WebHome){.twikiLink}
    -   [Stratego](../Stratego/WebHome){.twikiLink}
    -   [Sts](../Sts/WebHome){.twikiLink}
    -   [TWiki](WebHome){.twikiLink}
    -   [Tiger](../Tiger/WebHome){.twikiLink}
    -   [Tools](../Tools/WebHome){.twikiLink}
    -   [Transform](../Transform/WebHome){.twikiLink}
    -   [Variability](../Variability/WebHome){.twikiLink}
    -   [WGLD](../WGLD/WebHome){.twikiLink}
    -   [WebDSL](../WebDSL/WebHome){.twikiLink}
    -   [default](DefaultWebHome){.twikiLink}

::: {.twikiLeftBarPersonal}
::: {style="overflow:auto; height:1px; width:1px;"}
Changes Index Search

------------------------------------------------------------------------

Webs Book Compare GPCE06 Gmt Gpce Gpce04 Gpce05 IFIPWG211 IPA06 Main
Octave PEPM07 PEPM08 PHP Sandbox Sdf Stratego Sts TWiki Tiger Tools
Transform Variability default
[porn](http://www.estrategiavirtual.com/adult/) [free
porn](http://www.estrategiavirtual.com/free/)
:::
:::
:::
:::

::: {.twikiMain}
::: {.toolBar}
::: {.flexMenuBar}
::: {.flexMenu onmouseover="return showMenu(event, 100);" onmouseout="return hideMenu(event, 100);"}
Page

::: {#flexMenuContent100 .flexMenuContent}
-   [Edit
    Page](http://www.program-transformation.org/edit/TWiki/TWikiPlugins?t=1536826873)
-   [Rename
    Page](http://www.program-transformation.org/rename/TWiki/TWikiPlugins)
-   [Attach
    File](http://www.program-transformation.org/attach/TWiki/TWikiPlugins)

<!-- -->

-   [Printable](http://www.program-transformation.org/view/TWiki/TWikiPlugins?skin=print.pattern)
-   [Wiki
    Source](http://www.program-transformation.org/view/TWiki/TWikiPlugins?skin=text&raw=on&contenttype=text/plain)

<!-- -->

-   [Rev
    29](http://www.program-transformation.org/view/TWiki/TWikiPlugins?rev=1.29)
    [(diff 28)](http://www.program-transformation.org/rdiff/TWiki/TWikiPlugins?rev1=1.29&rev2=1.28)
-   [Rev
    28](http://www.program-transformation.org/view/TWiki/TWikiPlugins?rev=1.28)
    [(diff 27)](http://www.program-transformation.org/rdiff/TWiki/TWikiPlugins?rev1=1.28&rev2=1.27)
-   [Rev
    27](http://www.program-transformation.org/view/TWiki/TWikiPlugins?rev=1.27)
    [(diff 26)](http://www.program-transformation.org/rdiff/TWiki/TWikiPlugins?rev1=1.27&rev2=1.26)
-   [Total
    History](http://www.program-transformation.org/rdiff/TWiki/TWikiPlugins)

<!-- -->

-   [More
    \...](http://www.program-transformation.org/oops/TWiki/TWikiPlugins?template=oopsmore&param1=1.29&param2=1.29)
:::
:::

::: {.flexMenu onmouseover="return showMenu(event, 102);" onmouseout="return hideMenu(event, 102);"}
Web

::: {#flexMenuContent102 .flexMenuContent}
-   [Recent Changes](WebChanges){.twikiLink}
-   [Notify Service](WebNotify){.twikiLink}
-   [News](WebNews){.twikiLink}

<!-- -->

-   [Page Index](WebIndex){.twikiLink}
-   [Search](WebSearch){.twikiLink}

<!-- -->

-   [More
    \...](http://www.program-transformation.org/oops/TWiki/TWikiPlugins?template=oopsmore&param1=1.29&param2=1.29)
:::
:::

::: {.flexMenu onmouseover="return showMenu(event, 103);" onmouseout="return hideMenu(event, 103);"}
Wiki

::: {#flexMenuContent103 .flexMenuContent}
-   [About
    TWiki](http://www.program-transformation.org/view/TWiki/WebHome)
-   [Text
    Formatting](http://www.program-transformation.org/view/TWiki/TextFormattingRules)

<!-- -->

-   [Registration](http://www.program-transformation.org/view/TWiki/TWikiRegistration)
-   [Change
    Password](http://www.program-transformation.org/view/TWiki/ChangePassword)
-   [Reset
    Password](http://www.program-transformation.org/view/TWiki/ResetPassword)

<!-- -->

-   [Users](http://www.program-transformation.org/view/Main/TWikiUsers)
-   [Groups](http://www.program-transformation.org/view/Main/TWikiGroups)
:::
:::
:::
:::

::: {.twikiTopic}
TWiki Plugins {#twiki-plugins .twikiTopicTitle}
=============

::: {.twikiWebTitle}
TWiki
:::

::: {.twikiToc}
-   [TWiki Plugins](TWikiPlugins#TWiki_Plugins)
    -   [Overview](TWikiPlugins#Overview)
    -   [Preinstalled Plugins](TWikiPlugins#Preinstalled_Plugins)
    -   [Installing Plugins](TWikiPlugins#Installing_Plugins)
        -   [On-Site Pretesting](TWikiPlugins#On_Site_Pretesting)
        -   [Checking that Plugins are Working on a Live
            Server](TWikiPlugins#Checking_that_Plugins_are_Workin)
        -   [A Note on Plugin
            Performance](TWikiPlugins#A_Note_on_Plugin_Performance)
    -   [Managing Plugins](TWikiPlugins#Managing_Plugins)
        -   [Setting Preferences](TWikiPlugins#Setting_Preferences)
        -   [Listing Active
            Plugins](TWikiPlugins#Listing_Active_Plugins)
    -   [The TWiki Plugin API](TWikiPlugins#The_TWiki_Plugin_API)
        -   [Available Core
            Functions](TWikiPlugins#Available_Core_Functions)
        -   [Predefined Hooks](TWikiPlugins#Predefined_Hooks)
        -   [Hints on Writing Fast
            Plugins](TWikiPlugins#Hints_on_Writing_Fast_Plugins)
        -   [Plugin Version
            Detection](TWikiPlugins#Plugin_Version_Detection)
    -   [Creating Plugins](TWikiPlugins#Creating_Plugins)
        -   [The DefaultPlugin
            Alternative](TWikiPlugins#The_DefaultPlugin_Alternative)
        -   [Anatomy of a Plugin](TWikiPlugins#Anatomy_of_a_Plugin)
        -   [Creating the Perl
            Module](TWikiPlugins#Creating_the_Perl_Module)
        -   [Writing the Documentation
            Topic](TWikiPlugins#Writing_the_Documentation_Topic)
        -   [Packaging for
            Distribution](TWikiPlugins#Packaging_for_Distribution)
        -   [Publishing for Public
            Use](TWikiPlugins#Publishing_for_Public_Use)
    -   [Recommended Storage of Plugin
        Data](TWikiPlugins#Recommended_Storage_of_Plugin_Da)
        -   [Where to store Plugin Internal
            Data](TWikiPlugins#Where_to_store_Plugin_Internal_D)
        -   [Where to Store Data for Topics using the
            Plugin](TWikiPlugins#Where_to_Store_Data_for_Topics_u)
:::

[]{#TWiki_Plugins} TWiki Plugins
================================

*Plug-in enhanced feature add-ons, with a Plugin API for developers*

[]{#Overview} Overview
----------------------

You can add Plugins to extend TWiki\'s functionality, without altering
the core program code. A plug-in approach lets you:

-   add virtually unlimited features while keeping the main TWiki code
    compact and efficient;
-   heavily customize an installation and still do clean updates to new
    versions of TWiki;
-   rapidly develop new TWiki functions in Perl using the Plugin API.

Everything to do with TWiki Plugins - demos, new releases, downloads,
development, general discussion - is available at TWiki.org, in the
**[TWiki:Plugins](http://twiki.org/cgi-bin/view/Plugins "'Plugins' on TWiki.org")**
web.

[]{#Preinstalled_Plugins} Preinstalled Plugins
----------------------------------------------

TWiki comes with a set of Plugins as part of the standard installation.

-   [DefaultPlugin](DefaultPlugin){.twikiLink}: Optionally handles some
    legacy variables from older versions of TWiki. You can control this
    option from [TWikiPreferences](TWikiPreferences){.twikiLink}. (Perl
    programmers can also [add
    rules](TWikiPlugins#DefaultPluginAlt){.twikiAnchorLink} for simple
    custom processing.)
-   [EmptyPlugin](EmptyPlugin){.twikiLink}: Is a fully functional
    module, minus active code; it does nothing and serves as a template
    for new Plugin development
-   [CommentPlugin](CommentPlugin){.twikiLink}:
    %COMMENTPLUGIN\_SHORTDESCRIPTION%
-   [InterwikiPlugin](InterwikiPlugin){.twikiLink}: Use it for shorthand
    linking to remote sites, ex: `TWiki:Plugins` expands to
    [TWiki:Plugins](http://twiki.org/cgi-bin/view/Plugins "'Plugins' on TWiki.org")
    on TWiki.org. You can edit the predefined set of of Wiki-related
    sites, and add your own
-   [EditTablePlugin](EditTablePlugin){.twikiLink}: Edit TWiki tables
    using edit fields, date pickers and drop down boxes
-   [RenderListPlugin](RenderListPlugin){.twikiLink}: Render bullet
    lists in a variety of formats
-   [SlideShowPlugin](SlideShowPlugin){.twikiLink}:
    %SLIDESHOWPLUGIN\_SHORTDESCRIPTION%
-   [SmiliesPlugin](SmiliesPlugin){.twikiLink}:
    %SMILIESPLUGIN\_SHORTDESCRIPTION%
-   [SpreadSheetPlugin](SpreadSheetPlugin){.twikiLink}: Add spreadsheet
    calculation like `"$SUM( $ABOVE() )"` to tables located in TWiki
    topics.
-   [TablePlugin](TablePlugin){.twikiLink}: Control attributes of tables
    and sorting of table columns

[]{#InstallPlugin}

[]{#Installing_Plugins} Installing Plugins
------------------------------------------

Each TWikiPlugin comes with full documentation: step-by-step
installation instructions, a detailed description of any special
requirements, version details, and a working example for testing.

Most Plugins can be installed in three easy steps, with no programming
skills required:

1.  **Download** the zip file containing the Plugin, documentation, and
    any other required files, from
    [TWiki:Plugins](http://twiki.org/cgi-bin/view/Plugins "'Plugins' on TWiki.org").
2.  **Distribute** the files to their proper locations - unzip the zip
    archive in your TWiki installation directory - if have a standard
    TWiki installation, this will distribute automatically. Otherwise,
    place the files according to the directory paths listed on the
    Plugin top in
    [TWiki:Plugins](http://twiki.org/cgi-bin/view/Plugins "'Plugins' on TWiki.org").
3.  **Check** the demo example on the Plugin topic: if it\'s working,
    the installation was fine!

**Special Requests:** Some Plugins need certain Perl modules to be
preinstalled on the host system. Plugins may also use other resources,
like graphics, other modules, applications, templates. In these cases,
detailed instructions are in the Plugin documentation.

Each Plugin has a standard release page, located in the
[TWiki:Plugins](http://twiki.org/cgi-bin/view/Plugins "'Plugins' on TWiki.org")
web at TWiki.org. In addition to the documentation topic (`SomePlugin`),
there\'s a separate development page.

-   **Doc page:** Read all available info about the Plugin; download the
    attached distribution files.
-   **Dev page:** Post feature requests, bug reports and general dev
    comments; topic title ends in `Dev` (`SomePluginDev`).
-   **User support:** Post installation, how to use type questions (and
    answers, if you have them) in the
    [TWiki:Support](http://twiki.org/cgi-bin/view/Support "'Support' on TWiki.org")
    web.

[]{#PreTesting}

### []{#On_Site_Pretesting} On-Site Pretesting

To test new Plugins on your installation before making them public, you
may want to use one of these two approaches:

-   **Method 1:** Safely test on-the-fly by creating separate Production
    and Test branches in your live TWiki installation.
    -   **Duplicate** the `twiki/bin` and `twiki/lib` directories for
        the Test version, and adjust the paths in the new
        `lib/TWiki.cfg`. The following directories are shared:
        `twiki/data`, `twiki/templates` and `twiki/pub`.
    -   **Test** Plugins and other new features in the Test installation
        until you\'re satisfied.
        -   ![ALERT!](../pub/TWiki/TWikiDocGraphics/warning.gif){width="16"
            height="16"} If you modify topics using the new features,
            live users will likely see unfamiliar new META tags showing
            up on their pages - to avoid this, create and edit test-only
            topics to try out new features.
    -   **Copy** the modified files to the Production installation. You
        can update a TWiki installation live and users won\'t even
        notice.

<!-- -->

-   **Method 2:** List the Plugin being tested in the `DISABLEDPLUGINS`
    variable in [TWikiPreferences](TWikiPreferences){.twikiLink}.
    Redefine the `DISABLEDPLUGINS` variable in the `Sandbox` web and do
    the testing there.

### []{#Checking_that_Plugins_are_Workin} Checking that Plugins are Working on a Live Server

[InstalledPlugins](InstalledPlugins){.twikiLink} shows which Plugins
are: 1) installed, 2) loading properly and 3) what
[TWiki:Codev.PluginHandlers](http://twiki.org/cgi-bin/view/Codev.PluginHandlers "'Codev.PluginHandlers' on TWiki.org")
they invoke. Any failures are shown in the Errors section.

### []{#A_Note_on_Plugin_Performance} A Note on Plugin Performance

The performance of the system depends on the number of Plugins installed
and on the Plugin implementation. Some Plugins impose no measurable
performance decrease, some do. For example, `outsidePREHandler` is an
expensive callback function, or a Plugin might use many Perl libraries
that need to be initialized with each page view (unless you run
mod\_perl). It is recommended to measure the performance with and
without a new Plugin. Example for Unix:\
`time wget -qO /dev/null /view/TWiki/AbcPlugin`

In case you need to install an \"expensive\" Plugin and you need its
functionality only in one web you can place the Plugin topic into that
web. TWiki will initialize the Plugin only if the Plugin topic is found
(which won\'t be the case for other webs.)

[]{#Managing_Plugins} Managing Plugins
--------------------------------------

When you finish [installing a
Plugin](TWikiPlugins#InstallPlugin){.twikiAnchorLink}, you should be
able to read the user instructions and go. In fact, some Plugins require
additional settings or offer extra options that you have to select.
Also, you may want to make a Plugin available only in certain webs, or
temporarily disable it. And may want to list all available Plugins in
certain topics. You can handle all of these management tasks with simple
procedures.

### []{#Setting_Preferences} Setting Preferences

Installed Plugins can be **toggled on or off**, site-wide or by web,
through TWikiPreferences and individual WebPreferences:

-   All Plugin modules present in the `lib/TWiki/Plugins` directory are
    activated automatically unless disabled by the `DISABLEDPLUGINS`
    Preferences variable in TWikiPreferences. You can optionally list
    the installed Plugins in the `INSTALLEDPLUGINS` Preferences
    variable. This is useful to define the sequence of Plugin execution,
    or to specify other webs than the TWiki web for the Plugin topics.
    Settings in [TWikiPreferences](TWikiPreferences){.twikiLink} are:
    -   `Set INSTALLEDPLUGINS = DefaultPlugin, ...`
    -   `Set DISABLEDPLUGINS = EmptyPlugin, ...`

**Plugin execution order** in TWiki is determined by searching Plugin
topics in a specific sequence: First, full `web.topicname` name, if
specified in `INSTALLEDPLUGINS`; next, the TWiki web is searched; and
finally, the current web.

**Plugin-specific settings** are done in individual Plugin topics. Two
settings are standard for each Plugin:

1.  One line description, used to form the bullets describing the
    Plugins in the
    [TextFormattingRules](TextFormattingRules){.twikiLink} topic:
    -   `Set SHORTDESCRIPTION = Blah blah woof woof.`
2.  Debug Plugin, output can be seen in `data/debug.txt`. Set to 0=off
    or 1=on:
    -   `Set DEBUG = 0`

-   The settings can be retrieved as Preferences variables like
    `%<pluginname>_<var>%`, ex: `%DEFAULTPLUGIN_SHORTDESCRIPTION%` shows
    the description of the DefaultPlugin.

### []{#Listing_Active_Plugins} Listing Active Plugins

Plugin status variables let you list all active Plugins wherever needed.
There are two list formats:

-   The `%ACTIVATEDPLUGINS%` variable lists activated Plugins by name.
    (This variable is displayed in
    [TWikiPreferences](TWikiPreferences){.twikiLink} for debugging use.)
-   The `%PLUGINDESCRIPTIONS%` variable displays a bullet list with a
    one-line description of each active Plugins. This variable is based
    on the `%<plugin>_SHORTDESCRIPTION%` Preferences variables of
    individual topics and is shown in
    [TextFormattingRules](TextFormattingRules){.twikiLink}.

> **DEMO: Automatically List Active Plugins Using Variables**
>
> Using `%ACTIVATEDPLUGINS%`:\
> On this TWiki site, the active Plugins are:
> [DefaultPlugin](DefaultPlugin){.twikiLink},
> [EditTablePlugin](EditTablePlugin){.twikiLink},
> [InterwikiPlugin](InterwikiPlugin){.twikiLink},
> [RenderListPlugin](RenderListPlugin){.twikiLink},
> [SpreadSheetPlugin](SpreadSheetPlugin){.twikiLink},
> [TablePlugin](TablePlugin){.twikiLink}.
>
> Using `%PLUGINDESCRIPTIONS%`:\
> You can use any of these active TWiki Plugins:
>
> -   [DefaultPlugin](DefaultPlugin){.twikiLink}: This plugin can be
>     used to specify some simple custom rendering rules. It also
>     renders depreciated `*_text_*` as ***bold italic*** text.
> -   [EditTablePlugin](EditTablePlugin){.twikiLink}: Edit TWiki tables
>     using edit fields, date pickers and drop down boxes
> -   [InterwikiPlugin](InterwikiPlugin){.twikiLink}: Link
>     `ExternalSite:Page` text to external sites based on aliases
>     defined in the [InterWikis](InterWikis){.twikiLink} topic
> -   [RenderListPlugin](RenderListPlugin){.twikiLink}: Render bullet
>     lists in a variety of formats
> -   [SpreadSheetPlugin](SpreadSheetPlugin){.twikiLink}: Add
>     spreadsheet calculation like `"$SUM( $ABOVE() )"` to tables
>     located in TWiki topics.
> -   [TablePlugin](TablePlugin){.twikiLink}: Control attributes of
>     tables and sorting of table columns

[]{#PluginAPI}

[]{#The_TWiki_Plugin_API} The TWiki Plugin API
----------------------------------------------

The Application Programming Interface (API) for TWikiPlugins provides
the specifications for hooking into the core TWiki code from your
external Perl Plugin module. The Plugin API is new to the Production
version of TWiki with the 01-Sep-2001 release.

### []{#Available_Core_Functions} Available Core Functions

The [TWikiFuncModule](TWikiFuncModule){.twikiLink} (`lib/TWiki/Func.pm`)
implements ALL official Plugin functions. Plugins should ONLY use
functions published in this module.

![ALERT!](../pub/TWiki/TWikiDocGraphics/warning.gif){width="16"
height="16"} If you use functions not in `Func.pm`, you run the risk of
creating security holes. Also, your Plugin will likely break and require
updating when you upgrade to a new version of TWiki.

### []{#Predefined_Hooks} Predefined Hooks

In addition to TWiki core functions, Plugins can use **predefined
hooks**, or **call backs**, listed in the
`lib/TWiki/Plugins/EmptyPlugin.pm` module.

-   All but the initPlugin are disabled. To enable a call back, remove
    `DISABLE_` from the function name.
-   For best performance, enable only the functions you really need.
    NOTE: `outsidePREHandler` and `insidePREHandler` are particularly
    expensive.

Most Plugins use either the `commonTagsHandler` or
`startRenderingHandler` for rendering tasks:

-   `commonTagsHandler:` Use it to expand `%XYZPLUGIN%` and
    `%XYZPLUGIN{...}%` variables
-   `startRenderingHandler:` Use it for your own rendering rules or to
    overload TWiki\'s internal rendering like `[[links]]`

[TWiki:Codev/StepByStepRenderingOrder](http://twiki.org/cgi-bin/view/Codev/StepByStepRenderingOrder "'Codev/StepByStepRenderingOrder' on TWiki.org")
helps you decide which rendering handler to use.

### []{#Hints_on_Writing_Fast_Plugins} Hints on Writing Fast Plugins

-   Delay the Plugin initialization to the actual function which is
    handling the tag. This way all the expensive initialization is done
    only when needed.
-   For example, use an `eval` block like:\
    `eval { require IPC::Run }`\
    `return "<font color=\"red\">SamplePlugin: Can't load required modules ($@)</font>" if $@;`
-   You could return errors as strings to show what happened
-   You can use a flag to avoid running the initialization twice

### []{#Plugin_Version_Detection} Plugin Version Detection

To eliminate the incompatibility problems bound to arise from active
open Plugin development, a Plugin versioning system is provided for
automatic compatibility checking.

-   All modules require a `$VERSION='0.000'` variable, beginning at
    `1.000`.

<!-- -->

-   The `initPlugin` handler should check all dependencies and return
    TRUE if the initialization is OK or FALSE if something went wrong.
    -   The Plugin initialization code does not register a Plugin that
        returns FALSE (or that has no `initPlugin` handler).

<!-- -->

-   `$TWiki::Plugins::VERSION` in the `TWiki::Plugins` module contains
    the TWiki Plugin API version, currently **1.025**.
    -   You can also use the
        [%PLUGINVERSION{}%](TWikiVariables#VarPLUGINVERSION){.twikiAnchorLink}
        variable to query the Plugin API version or the version of
        installed Plugins.

[]{#CreatePlugins}

[]{#Creating_Plugins} Creating Plugins
--------------------------------------

With a reasonable knowledge of the Perl scripting language, you can
create new Plugins or modify and extend existing ones. Basic plug-in
architecture uses an Application Programming Interface (API), a set of
software instructions that allow external code to interact with the main
program. The [TWiki Plugin
API](TWikiPlugins#PluginAPI){.twikiAnchorLink} Plugins by providing a
programming interface for TWiki.

[]{#DefaultPluginAlt}

### []{#The_DefaultPlugin_Alternative} The DefaultPlugin Alternative

-   **DefaultPlugin** can handle some outdated TWiki variables, found,
    for example, in sites recently updated from an old version. Settings
    are in [DefaultPlugin](DefaultPlugin){.twikiLink} topic. You can
    also add your own simple custom processing rules here, though in all
    but very simple cases, writing a new Plugin is preferable.

### []{#Anatomy_of_a_Plugin} Anatomy of a Plugin

A basic TWiki Plugin consists of two elements:

-   a Perl module, ex: `MyFirstPlugin.pm`
-   a documentation topic, ex: `MyFirstPlugin.txt`

The Perl module can be a block of code that connects with TWiki alone,
or it can include other elements, like other Perl modules (including
other Plugins), graphics, TWiki templates, external applications (ex: a
Java applet), or just about anything else it can call. In particular,
files that should be web-accessible (graphics, Java applets \...) are
best placed as attachments of the `MyFirstPlugin` topic. Other needed
Perl code is best placed in a `lib/TWiki/Plugins/MyFirstPlugin/`
directory.

The Plugin API handles the details of connecting your Perl module with
main TWiki code. When you\'re familiar with the [Plugin
API](TWikiPlugins#PluginAPI){.twikiAnchorLink}, you\'re ready to develop
Plugins.

### []{#Creating_the_Perl_Module} Creating the Perl Module

Copy file `lib/TWiki/Plugins/EmptyPlugin.pm` to `<name>Plugin.pm`. The
`EmptyPlugin.pm` module contains mostly empty functions, so it does
nothing, but it\'s ready to be used. Customize it. Refer to the [Plugin
API](TWikiPlugins#PluginAPI){.twikiAnchorLink} specs for more
information.

If your Plugin uses its own modules and objects, you must include the
name of the Plugin in the package name. For example, write
`Package MyFirstPlugin::Attrs;` instead of just `Package Attrs;`. Then
call it using:

      use TWiki::Plugins::MyFirstPlugin::Attrs;
      $var = MyFirstPlugin::Attrs->new();

[]{#CreatePluginTopic}

### []{#Writing_the_Documentation_Topic} Writing the Documentation Topic

The Plugin documentation topic contains usage instructions and version
details. It serves the Plugin files as
[FileAttachments](FileAttachment){.twikiLink} for downloading. (The doc
topic is also included *in* the [distribution
package](TWikiPlugins#CreatePluginPackage){.twikiAnchorLink}.) To create
a documentation topic:

1.  **Copy** the Plugin topic template from TWiki.org. To copy the text,
    go to
    [TWiki:Plugins/PluginPackage](http://twiki.org/cgi-bin/view/Plugins/PluginPackage "'Plugins/PluginPackage' on TWiki.org")
    and:
    -   enter the Plugin name in the \"How to Create a Plugin\" section
    -   click Create
    -   select all in the Edit box & copy
    -   Cancel the edit
    -   go back to your site to the TWiki web
    -   In the [GoBox](GoBox){.twikiLink} enter your Plugin name, for
        example `MyFirstPlugin`, press enter and create the new topic
    -   paste & save new Plugin topic on your site
2.  **Customize** your Plugin topic.
    -   In case you plan to publish your Plugin at TWiki.org, use
        Interwiki names for author names, like
        [TWiki:Main/TWikiGuest](http://twiki.org/cgi-bin/view/Main/TWikiGuest "'Main/TWikiGuest' on TWiki.org").
3.  **Save** your topic, for use in
    [packaging](TWikiPlugins#CreatePluginPackage){.twikiAnchorLink} and
    [publishing](TWikiPlugins#PublishPlugin){.twikiAnchorLink} your
    Plugin.

> **OUTLINE: Doc Topic Contents**\
> Check the Plugins web on TWiki.org for the latest Plugin doc topic
> template. Here\'s a quick overview of what\'s covered:
>
> **Syntax Rules:** \<*Describe any special text formatting that will be
> rendered.*\>\"
>
> **Example:** \<*Include an example of the Plugin in action. Possibly
> include a static HTML version of the example to compare if the
> installation was a success!*\>\"
>
> **Plugin Settings:** \<*Description and settings for custom Plugin
> %VARIABLES%, and those required by TWiki.*\>\"
>
> -   **Plugins Preferences** \<*If user settings are needed,
>     explain\... Entering values works exactly like
>     [TWikiPreferences](TWikiPreferences){.twikiLink} and
>     [WebPreferences](WebPreferences){.twikiLink}: six (6) spaces and
>     then:*\>\"
>     -   **Set \<*EXAMPLE = value added*\>**
>
> **Plugin Installation Instructions:** \<*Step-by-step set-up guide,
> user help, whatever it takes to install and run, goes here.*\>\"
>
> **Plugin Info:** \<*Version, credits, history, requirements - entered
> in a form, displayed as a table. Both are automatically generated when
> you create or edit a page in the
> [TWiki:Plugins](http://twiki.org/cgi-bin/view/Plugins "'Plugins' on TWiki.org")
> web.*\>\"

[]{#CreatePluginPackage}

### []{#Packaging_for_Distribution} Packaging for Distribution

A minimum Plugin release consists of a Perl module with a
[WikiName](WikiName){.twikiLink} that ends in `Plugin`, ex:
`MyFirstPlugin.pm`, and a documentation page with the same
name(`MyFirstPlugin.txt`).

1.  Distribute the Plugin files in a directory structure that mirrors
    TWiki. If your Plugin uses additional files, include them ALL:
    -   `lib/TWiki/Plugins/MyFirstPlugin.pm`
    -   `data/TWiki/MyFirstPlugin.txt`
    -   `pub/TWiki/MyFirstPlugin/uparrow.gif` \[a required graphic\]
2.  Create a zip archive with the Plugin name (`MyFirstPlugin.zip`) and
    add the entire directory structure from Step 1. The archive should
    look like this:
    -   `lib/TWiki/Plugins/MyFirstPlugin.pm`
    -   `data/TWiki/MyFirstPlugin.txt`
    -   `pub/TWiki/MyFirstPlugin/uparrow.gif`

[]{#PublishPlugin}

### []{#Publishing_for_Public_Use} Publishing for Public Use

You can release your tested, packaged Plugin to the TWiki community
through the
[TWiki:Plugins](http://twiki.org/cgi-bin/view/Plugins "'Plugins' on TWiki.org")
web. All Plugins submitted to TWiki.org are available for download and
further development in
[TWiki:Plugins/PluginPackage](http://twiki.org/cgi-bin/view/Plugins/PluginPackage "'Plugins/PluginPackage' on TWiki.org").
Publish your Plugin in these steps:

1.  **Post** the Plugin documentation topic in the
    [TWiki:Plugins/PluginPackage](http://twiki.org/cgi-bin/view/Plugins/PluginPackage "'Plugins/PluginPackage' on TWiki.org"):
    -   enter the Plugin name in the \"How to Create a Plugin\" section,
        for example `MyFirstPlugin`
    -   paste in the topic text from [Creating Plugin
        Documentation](TWikiPlugins#CreatePluginTopic){.twikiAnchorLink}
        and save
2.  **Attach** the distribution zip file to the topic, ex:
    `MyFirstPlugin.zip`
3.  **Link** from the doc page to a new, blank page named after the
    Plugin, and ending in `Dev`, ex: `MyFirstPluginDev`. This is the
    discussion page for future development. (User support for Plugins is
    handled in
    [TWiki:Support](http://twiki.org/cgi-bin/view/Support "'Support' on TWiki.org").)
4.  **Put** the Plugin into the CVS repository, see
    [TWiki:Plugins/ReadmeFirst](http://twiki.org/cgi-bin/view/Plugins/ReadmeFirst "'Plugins/ReadmeFirst' on TWiki.org")
    (optional)

Thank you very much for sharing your Plugin with the TWiki community :-)

[]{#RecommendedStorageOfPluginData}

[]{#Recommended_Storage_of_Plugin_Da} Recommended Storage of Plugin Data
------------------------------------------------------------------------

Plugins sometimes need to store data. This can be Plugin internal data
like cache data, or generated data for the browser like images. The
following is a recommendation where to store the data.

### []{#Where_to_store_Plugin_Internal_D} Where to store Plugin Internal Data

In case the Plugin generates data just for internal use, or data which
is not specific to a topic, store it in the Plugin\'s attachment
directory.

-   The Plugin\'s attachment directory is
    `pubdir/Installweb/FooBarPlugin`
    -   `Installweb` refers to the name of the web where the Plugin is
        installed
-   The Plugin\'s attachment URL is `%PUBURL%/Installweb/FooBarPlugin`
-   The filename should start with an underscore, followed by an
    identifier, e.g. `_any_name.ext`
    -   The leading underscore avoids a nameclash with files attached to
        the Plugin topic
    -   Use only alphanumeric characters, underscores and periods to
        avoid platform dependency issues and URL issues
    -   Do not use subdirectories (rename and delete would fail)
-   Use Plugin API functions documented in
    [TWikiFuncModule](TWikiFuncModule){.twikiLink} to ensure
    portability:
    -   Use `getPubDir()` to get the attachment root directory
    -   Use `getUrlHost()` and `getPubUrlPath()` to build the URL in
        case you create content for the browser
    -   Use `$installWeb` to get the name of the web where the Plugin is
        installed
    -   Create the web directory and topic attachment directory if
        needed
-   Hint: Package the Plugin at least with one file attachment. This
    ensures that the attachment directory already exists

### []{#Where_to_Store_Data_for_Topics_u} Where to Store Data for Topics using the Plugin

In case the Plugin generates data which is specific to a topic, store it
in the topic\'s attachment directory.

-   The topic\'s attachment directory is `pubdir/Webname/TopicName`
-   The topic\'s attachment URL is `%PUBURL%/Webname/TopicName`
-   The filename should start with an underscore, followed by the Plugin
    name, an underscore and an identifier, e.g.
    `_FooBarPlugin_any_name.ext`
    -   The leading underscore avoids a nameclash with files attached to
        the same topic
    -   Use only alphanumeric characters, underscores and periods to
        avoid platform dependency issues and URL issues
    -   Do not use subdirectories (rename and delete would fail)
-   Use Plugin API functions documented in
    [TWikiFuncModule](TWikiFuncModule){.twikiLink} to ensure
    portability:
    -   Use `getPubDir()` to get the attachment root directory
    -   Use `getUrlHost()` and `getPubUrlPath()` to build the URL in
        case you create content for the browser

Example code to build the file name:

    sub _make_filename
    {
        my ( $web, $topic, $name ) = @_;

        # Create web directory "pub/$web" if needed
        my $dir = TWiki::Func::getPubDir() . "/$web";
        unless( -e "$dir" ) {
            umask( 002 );
            mkdir( $dir, 0775 );
        }
        # Create topic directory "pub/$web/$topic" if needed
        $dir .= "/$topic";
        unless( -e "$dir" ) {
            umask( 002 );
            mkdir( $dir, 0775 );
        }
        return "$dir/_FooBarPlugin_$name";
    }

\--
[TWiki:Main/PeterThoeny](http://twiki.org/cgi-bin/view/Main/PeterThoeny "'Main/PeterThoeny' on TWiki.org")
- 14 Aug 2004\
\--
[TWiki:Main/AndreaSterbini](http://twiki.org/cgi-bin/view/Main/AndreaSterbini "'Main/AndreaSterbini' on TWiki.org")
- 29 May 2001\
\--
[TWiki:Main/MikeMannix](http://twiki.org/cgi-bin/view/Main/MikeMannix "'Main/MikeMannix' on TWiki.org")
- 03 Dec 2001\
[]{#TopicEnd}
:::

::: {.twikiTopicInfo .twikiRevInfo .twikiGrayText .twikiMoved}
:::
:::
:::
:::
